 /**
 * Jeeliz Glance Tracker - https://github.com/jeeliz/jeelizGlanceTracker
 *
 * Copyright 2018 Jeeliz ( https://jeeliz.com )
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
*/

var GLANCETRACKERAPI=(function(){/*
 SharedContext.is_webgl2() &&*/
function fa(b,c){var e=new XMLHttpRequest;e.open("GET",b,!0);e.withCredentials=!1;e.onreadystatechange=function(){4!==e.readyState||200!==e.status&&0!==e.status||c(e.responseText)};e.send()}function ha(b,c){if(0===c||"object"!==typeof b)return b;b=Object.assign({},b);c=void 0===c||-1===c?-1:c-1;for(var e in b)b[e]=ha(b[e],c);return b}
function ma(b){switch(b){case "relu":return"gl_FragColor=max(vec4(0.,0.,0.,0.),gl_FragColor);";case "elu":return"gl_FragColor=mix(exp(-abs(gl_FragColor))-vec4(1.,1.,1.,1.),gl_FragColor,step(0.,gl_FragColor));";case "elu01":return"gl_FragColor=mix(0.1*exp(-abs(gl_FragColor))-vec4(0.1,0.1,0.1,0.1),gl_FragColor,step(0.,gl_FragColor));";case "arctan":return"gl_FragColor=atan(3.14159265359*texture2D(u0,vUV))/3.14159265359;";case "copy":return"";default:return!1}}
function sa(b,c){var e=c%8;return b[(c-e)/8]>>7-e&1}
function ya(b){var c=JSON.parse(b);b=c.ne;var e=c.nf,l=c.n;var q="undefined"===typeof btoa?Buffer.from(c.data,"base64").toString("latin1"):atob(c.data);var t=q.length;c=new Uint8Array(t);for(var p=0;p<t;++p)c[p]=q.charCodeAt(p);q=new Float32Array(l);t=new Float32Array(e);p=b+e+1;for(var u=0;u<l;++u){for(var d=p*u,y=0===sa(c,d)?1:-1,A=d+1,n=1,k=0,z=A+b-1;z>=A;--z)k+=n*sa(c,z),n*=2;A=k;d=d+1+b;n=t.length;k=0;for(z=d;z<d+n;++z)t[k]=sa(c,z),++k;for(n=d=0;n<e;++n)d+=t[n]*Math.pow(2,-n-1);q[u]=0===d&&0===
A?0:y*(1+d)*Math.pow(2,1+A-Math.pow(2,b-1))}return q}
var C=function(){function b(r,m,v){m=r.createShader(m);r.shaderSource(m,v);r.compileShader(m);return r.getShaderParameter(m,r.COMPILE_STATUS)?m:!1}function c(r,m,v){m=b(r,r.VERTEX_SHADER,m);v=b(r,r.FRAGMENT_SHADER,v);r===a&&p.push(m,v);var D=r.createProgram();r.attachShader(D,m);r.attachShader(D,v);r.linkProgram(D);return D}function e(r,m){m.v=m.v?!0:!1;if(!m.v){void 0===m.qa&&(m.qa="precision lowp float;attribute vec2 a0;varying vec2 vv0;void main(){gl_Position=vec4(a0,0.,1.),vv0=a0*.5+vec2(.5,.5);}");void 0===
m.sa&&(m.sa=["a0"]);void 0===m.ja&&(m.ja=[2]);if(void 0===m.precision||"highp"===m.precision)m.precision=n;m.id=y++;void 0!==m.rc&&(m.rc.forEach(function(D,K){m.h=m.h.replace(D,m.Ja[K])}),m.rc.splice(0));m.yb=0;m.ja.forEach(function(D){m.yb+=4*D});m.Y=c(r,m.qa,"precision "+m.precision+" float;\n"+m.h);m.u={};m.i.forEach(function(D){m.u[D]=r.getUniformLocation(m.Y,D)});m.attributes={};m.ka=[];m.sa.forEach(function(D){var K=r.getAttribLocation(m.Y,D);m.attributes[D]=K;m.ka.push(K)});if(m.j){r.useProgram(m.Y);
d=m;u=m.id;for(var v in m.j)r.uniform1i(m.u[v],m.j[v])}m.da=!0}}function l(r){za.Vd(I);u!==r.id&&(I.J(),u=r.id,d=r,a.useProgram(r.Y),r.ka.forEach(function(m){0!==m&&a.enableVertexAttribArray(m)}))}function q(r,m,v){e(r,m,v);r.useProgram(m.Y);r.enableVertexAttribArray(0);u=-1;return d=m}function t(){return{h:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",i:["u1"],j:{u1:0}}}var p=[],u=-1,d=null,y=0,A=!1,n="highp",k=["u1"],z=["u0"],x={u1:0},f={u0:0},h={u1:0,u2:1},
E={u3:0},L={s0:t(),s1:{h:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",i:k,j:x,precision:"lowp"},s2:{h:"uniform sampler2D u1,u2;varying vec2 vv0;void main(){vec4 a=texture2D(u2,vv0),b=texture2D(u1,vv0);gl_FragColor=a*b;}",i:["u1","u2"],j:h},s3:{h:"uniform sampler2D u1;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=a.r*f;}",i:k,j:x},s4:{h:"uniform sampler2D u1,u2;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u2,vv0),b=texture2D(u1,vv0);gl_FragColor=a.a*b.r*f;}",
i:["u1","u2"],j:h},s5:{h:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vec2(1.-vv0.x,vv0.y));}",i:k,j:x},s6:{h:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vec2(vv0.x,1.-vv0.y));}",i:k,j:x},s7:{h:"uniform sampler2D u0;uniform float u4;varying vec2 vv0;void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=a*u4;}",i:["u0","u4"],j:f},s8:{h:"uniform sampler2D u0;uniform float u4;varying vec2 vv0;const vec4 f=vec4(.25,.25,.25,.25),g=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0);float b=dot(a*u4,f);gl_FragColor=b*g;}",
i:["u0","u4"],j:f},s9:{h:"uniform sampler2D u1;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);void main(){float a=.25*dot(e,texture2D(u1,vv0));gl_FragColor=a*e;}",i:k,j:x},s10:{h:"uniform sampler2D u1,u5;uniform float u6;const vec4 f=vec4(1.,1.,1.,1.);varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0),b=texture2D(u5,vv0);gl_FragColor=mix(b,a,u6*f);}",i:["u1","u5","u6"],j:{u1:0,u5:1}},s11:{h:"uniform sampler2D u1;uniform vec2 u7;varying vec2 vv0;void main(){gl_FragColor=.25*(texture2D(u1,vv0+u7)+texture2D(u1,vv0+u7*vec2(1.,-1.))+texture2D(u1,vv0+u7*vec2(-1.,-1.))+texture2D(u1,vv0+u7*vec2(-1.,1.)));}",
i:["u1","u7"],j:x},s12:{h:"uniform sampler2D u1;uniform vec4 u8;varying vec2 vv0;float g(float a,float b){a=floor(a)+.5;return floor(a/exp2(b));}float h(float a,float b){return floor(a*exp2(b)+.5);}float i(float a,float b){return mod(a,h(1.,b));}float e(float c,float a,float b){a=floor(a+.5),b=floor(b+.5);return i(g(c,a),b-a);}vec4 j(float a){if(a==0.)return vec4(0.,0.,0.,0.);float k=128.*step(a,0.);a=abs(a);float c=floor(log2(a)),l=c+127.,b=(a/exp2(c)-1.)*8388608.,d=l/2.,m=fract(d)*2.,n=floor(d),o=e(b,0.,8.),p=e(b,8.,16.),q=m*128.+e(b,16.,23.),r=k+n;return vec4(o,p,q,r)/255.;}void main(){float a=dot(texture2D(u1,vv0),u8);gl_FragColor=j(a);}",
i:["u1","u8"],j:x},s13:{h:"uniform sampler2D u0;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0),b=e/(e+exp(-a));gl_FragColor=b;}",i:z,j:f,v:!0},s14:{h:"uniform sampler2D u0;varying vec2 vv0;const vec4 f=vec4(0.,0.,0.,0.);void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=max(f,a);}",i:z,j:f},s15:{h:"uniform sampler2D u0;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=mix(exp(-abs(a))-f,a,step(0.,a));}",i:z,j:f},
s16:{h:"uniform sampler2D u0;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0),b=exp(-abs(a))-f;gl_FragColor=mix(.1*b,a,step(0.,a));}",i:z,j:f},s17:{h:"uniform sampler2D u0,u6,u9;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0),c=texture2D(u6,vv0),d=texture2D(u9,vv0),b=a/d;gl_FragColor=c*mix(exp(-abs(b))-f,b,step(0.,a));}",i:["u0","u6","u9"],j:{u0:0,u6:1,u9:2},v:!0},s18:{h:"uniform sampler2D u0;const float e=3.141593;varying vec2 vv0;void main(){gl_FragColor=atan(e*texture2D(u0,vv0))/e;}",
i:z,j:f},s19:{h:"uniform sampler2D u0;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0),b=log(f+a);gl_FragColor=b;}",i:z,j:f,v:!0},s20:{h:"uniform sampler2D u0,u10;uniform float u11;const vec2 e=vec2(.5,.5);const float f=1e-5;const vec4 g=vec4(1.,1.,1.,1.),i=vec4(0.,0.,0.,0.);varying vec2 vv0;void main(){vec4 a=texture2D(u10,e);float b=u11*u11;vec4 c=max(b*a,f*g);gl_FragColor=texture2D(u0,vv0)/c;}",i:["u0","u10","u11"],j:{u0:0,u10:1},v:!0},s21:{h:"uniform sampler2D u1;uniform vec2 u12;varying vec2 vv0;void main(){float a=u12.x*u12.y;vec2 b=floor(vv0*a)/a,c=fract(vv0*a),d=floor(b*u12.y),f=floor(u12.x*fract(b*u12.y)),g=(f*u12.y+d)/a;gl_FragColor=texture2D(u1,g+c/a);}",
i:["u1","u12"],j:x},s22:{h:"uniform sampler2D u13,u14,u15;varying vec2 vv0;void main(){vec4 a=texture2D(u15,vv0);vec2 b=a.rg,c=a.ba;vec4 d=texture2D(u13,b),f=texture2D(u14,c);gl_FragColor=d*f;}",i:["u13","u14","u15"],j:{u14:0,u13:1,u15:2},v:!0},s23:{h:"uniform float u16;uniform sampler2D u13,u14;varying vec2 vv0;void main(){vec2 a=fract(vv0*u16);vec4 b=texture2D(u13,vv0),c=texture2D(u14,a);gl_FragColor=b*c;}",i:["u14","u13","u16"],j:{u14:0,u13:1}},s24:{h:"uniform float u16;uniform sampler2D u13,u14,u17,u18,u19,u20;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.),g=vec4(1e-3,1e-3,1e-3,1e-3);void main(){vec2 h=vv0*u16,l=floor(h),c=h-l;vec4 m=texture2D(u13,vv0),d=texture2D(u14,c),a=texture2D(u20,vv0);a=a*255.;vec4 n=texture2D(u17,c),o=texture2D(u18,c),p=texture2D(u19,c),i=step(-g,-a),b=e-i,j=b*step(-e-g,-a);b*=e-j;vec4 k=b*step(-2.*e-g,-a);b*=e-k;vec4 q=b;d=i*d+j*n+k*o+q*p,gl_FragColor=m*d;}",
i:"u13 u14 u16 u20 u17 u18 u19".split(" "),j:{u14:0,u13:1,u20:3,u17:4,u18:5,u19:6},v:!0},s25:{h:"uniform sampler2D u13,u14,u21;uniform float u16,u22,u23,u24;varying vec2 vv0;const vec2 j=vec2(1.,1.);void main(){vec2 a=floor(u22*vv0),b=u22*vv0-a;float c=u16/u22;vec2 d=floor(b*c),f=b*c-d,g=(a+f)/u22;float k=u22*u24/u16;vec2 l=k*d,h=(l+f*u23)/u24,i=step(h,j);vec4 m=texture2D(u13,g),n=texture2D(u14,h),o=m*n*i.x*i.y,p=texture2D(u21,g);gl_FragColor=o*u23*u23+p;}",i:"u13 u14 u16 u22 u23 u24 u21".split(" "),
j:{u14:0,u13:1,u21:2}},s26:{h:"uniform sampler2D u13,u14;varying vec2 vv0;void main(){vec4 a=texture2D(u13,vv0),b=texture2D(u14,vv0);gl_FragColor=a*b;}",i:["u13","u14"],j:{u14:0,u13:1},v:!0},s27:{h:"uniform sampler2D u1,u21;uniform float u25;varying vec2 vv0;void main(){gl_FragColor=texture2D(u21,vv0)+u25*texture2D(u1,vv0);}",i:["u1","u21","u25"],j:{u1:0,u21:1}},s28:{h:"varying vec2 vv0;uniform sampler2D u1;const vec4 f=vec4(1.,1.,1.,1.),g=vec4(.299,.587,.114,0.);void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=dot(a,g)*f;}",
i:k,j:x,precision:"lowp"},s29:{h:"varying vec2 vv0;uniform sampler2D u1;uniform float u26;const vec3 f=vec3(.299,.587,.114);void main(){vec3 a=texture2D(u1,vv0).rgb,b=texture2D(u1,vv0+vec2(0.,u26)).rgb,c=texture2D(u1,vv0+vec2(u26,u26)).rgb,d=texture2D(u1,vv0+vec2(u26,0.)).rgb;gl_FragColor=vec4(dot(a,f),dot(b,f),dot(c,f),dot(d,f));}",i:["u1","u26"],j:x,precision:"lowp"},s30:{h:"varying vec2 vv0;uniform sampler2D u1;uniform float u26;const vec3 f=vec3(.299,.587,.114);void main(){vec3 a=texture2D(u1,vv0).rgb,b=texture2D(u1,vv0+vec2(0.,u26)).rgb,c=texture2D(u1,vv0+vec2(u26,u26)).rgb,d=texture2D(u1,vv0+vec2(u26,0.)).rgb;gl_FragColor=vec4(a.r,b.g,c.b,dot(d,f));}",
i:["u1","u26"],j:x,precision:"lowp"},s31:{h:"varying vec2 vv0;uniform sampler2D u1,u2;uniform float u27;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=vec4(0.);a-=texture2D(u1,vec2(vv0.x-u27,vv0.y-u27))*1.,a-=texture2D(u1,vec2(vv0.x-u27,vv0.y))*2.,a-=texture2D(u1,vec2(vv0.x-u27,vv0.y+u27))*1.,a+=texture2D(u1,vec2(vv0.x+u27,vv0.y-u27))*1.,a+=texture2D(u1,vec2(vv0.x+u27,vv0.y))*2.,a+=texture2D(u1,vec2(vv0.x+u27,vv0.y+u27))*1.;vec4 b=vec4(0.);b-=texture2D(u1,vec2(vv0.x-u27,vv0.y-u27))*1.,b-=texture2D(u1,vec2(vv0.x,vv0.y-u27))*2.,b-=texture2D(u1,vec2(vv0.x+u27,vv0.y-u27))*1.,b+=texture2D(u1,vec2(vv0.x-u27,vv0.y+u27))*1.,b+=texture2D(u1,vec2(vv0.x,vv0.y+u27))*2.,b+=texture2D(u1,vec2(vv0.x+u27,vv0.y+u27))*1.;vec3 c=sqrt(a.rgb*a.rgb+b.rgb*b.rgb);vec4 e=vec4(c,texture2D(u1,vv0).a),g=texture2D(u2,vv0);gl_FragColor=g.a*e.r*f;}",
i:["u1","u2","u27"],j:h,v:!0},s32:{h:"varying vec2 vv0;uniform sampler2D u1,u2;uniform float u27;const vec4 j=vec4(1.,1.,1.,1.);const vec2 k=vec2(1.,1.);void main(){float h=0.;vec2 l=k*u27,a,b;float c,d,i=0.;for(float e=-4.;e<=4.;e+=1.)for(float f=-4.;f<=4.;f+=1.)a=vec2(e,f),c=length(a)/2.,d=exp(-c*c),b=vv0+l*a,h+=d*texture2D(u1,b).r,i+=d;vec4 m=texture2D(u2,vv0);gl_FragColor=m.a*(texture2D(u1,b).r-h/i)*j;}",i:["u1","u2","u27"],j:h,v:!0},s33:{h:"uniform sampler2D u3;uniform vec2 u7;varying vec2 vv0;vec4 e(vec4 a,vec4 b){vec4 c=step(a,b);return mix(a,b,c);}const vec2 g=vec2(.5,.5),h=vec2(1.,0.),i=vec2(0.,1.);void main(){vec2 a=vv0-u7*g;vec4 b=texture2D(u3,a),c=texture2D(u3,a+u7*h),d=texture2D(u3,a+u7*i),j=texture2D(u3,a+u7),k=e(b,c),l=e(d,j);gl_FragColor=e(k,l);}",
i:["u3","u7"],j:E},s34:{h:"uniform sampler2D u3;uniform vec2 u7;varying vec2 vv0;const vec2 k=vec2(1.,0.),l=vec2(0.,1.),m=vec2(2.,0.),n=vec2(0.,2.);vec4 e(vec4 a,vec4 b){vec4 c=step(a,b);return mix(a,b,c);}vec4 f(vec2 a){vec4 b=texture2D(u3,a),c=texture2D(u3,a+u7*k),d=texture2D(u3,a+u7*l),g=texture2D(u3,a+u7),h=e(b,c),i=e(d,g);return e(h,i);}void main(){vec2 a=vv0+u7*vec2(-.55,-1.05);vec4 b=f(a),c=f(a+u7*m),d=f(a+u7*2.),g=f(a+u7*n),h=e(b,c),i=e(d,g);gl_FragColor=e(h,i);}",i:["u3","u7"],j:E,v:!0},
s35:{h:"uniform sampler2D u1;varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=a*a;}",i:["u1"],j:x,precision:"lowp",v:!0},s36:{h:"uniform sampler2D u1;uniform vec2 u7;varying vec2 vv0;const float e=15444.;void main(){vec4 a=1001./e*texture2D(u1,vv0-3.*u7)+2002./e*texture2D(u1,vv0-2.*u7)+3003./e*texture2D(u1,vv0-u7)+3432./e*texture2D(u1,vv0)+3003./e*texture2D(u1,vv0+u7)+2002./e*texture2D(u1,vv0+2.*u7)+1001./e*texture2D(u1,vv0+3.*u7);gl_FragColor=a;}",i:["u7","u1"],j:x,precision:"lowp",
v:!0},s37:{h:"uniform sampler2D u1,u10,u28;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);const float g=.1;void main(){vec4 a=texture2D(u10,vv0),b=texture2D(u28,vv0),c=texture2D(u1,vv0),d=max(f*g,b-a*a),h=sqrt(d);gl_FragColor=(c-a)/h;}",i:["u1","u10","u28"],j:{u1:0,u10:1,u28:2},v:!0}},J={s38:{h:"uniform float u16,u29;uniform sampler2D u13,u14,u21;varying vec2 vv0;const vec2 ZERO2=vec2(0.,0.),ONE2=vec2(1.,1.),HALF2=vec2(.5,.5),EPS2=vec2(1e-5,1e-5);void main(){vec4 sum=texture2D(u21,vv0);float toSparsity=1.1111;vec2 uvFrom,uvWeight,xyPatch=ZERO2,eps2=EPS2/u16,xyTo=floor(vv0*u16+eps2);float weightSize=toSparsity*u16;vec2 halfFromSparsity=ONE2*(toSparsity-1.)/2.;for(float patch_x=0.;patch_x<1.1111;patch_x+=1.){xyPatch.x=patch_x;for(float patch_y=0.;patch_y<1.1111;patch_y+=1.)xyPatch.y=patch_y,uvFrom=(xyTo+HALF2+u29*(xyPatch-halfFromSparsity))/u16,uvFrom+=step(uvFrom,-eps2),uvFrom-=step(ONE2-eps2,uvFrom),uvWeight=(xyTo*toSparsity+xyPatch+HALF2)/weightSize,sum+=texture2D(u13,uvWeight)*texture2D(u14,uvFrom);}gl_FragColor=sum,gl_FragColor*=2.2222;}",
i:["u16","u13","u14","u21","u29"],Ja:["1.1111","gl_FragColor\\*=2.2222;"]},s39:{h:"uniform float u16,u29,u24;uniform sampler2D u13,u14,u21;varying vec2 vv0;const vec2 ZERO2=vec2(0.,0.),ONE2=vec2(1.,1.),HALF2=vec2(.5,.5),EPS2=vec2(1e-4,1e-4);void main(){vec4 sum=texture2D(u21,vv0);float fromSparsity=1.1111,shrinkFactor=3.3333;vec2 uvFrom,uvWeight,xyFrom,xyPatchTo,xyPatch=ZERO2,xyShrink=ZERO2,eps2=EPS2/u24,xyTo=floor(vv0*u16+eps2);float weightSize=fromSparsity*u24;vec2 halfFromSparsity=ONE2*(fromSparsity-1.)/2.;float toSparsity=weightSize/u16;vec2 xyFrom0=xyTo*shrinkFactor;for(float patch_x=0.;patch_x<1.1111;patch_x+=1.){xyPatch.x=patch_x;for(float patch_y=0.;patch_y<1.1111;patch_y+=1.){xyPatch.y=patch_y;for(float shrink_x=0.;shrink_x<3.3333;shrink_x+=1.){xyShrink.x=shrink_x;for(float shrink_y=0.;shrink_y<3.3333;shrink_y+=1.)xyShrink.y=shrink_y,xyFrom=xyFrom0+xyShrink+shrinkFactor*u29*(xyPatch-halfFromSparsity),uvFrom=(xyFrom+HALF2)/u24,uvFrom+=step(uvFrom,-eps2),uvFrom-=step(ONE2-eps2,uvFrom),xyPatchTo=xyPatch*shrinkFactor+xyShrink,uvWeight=(xyTo*toSparsity+xyPatchTo+HALF2)/weightSize,sum+=texture2D(u13,uvWeight)*texture2D(u14,uvFrom);}}}gl_FragColor=sum,gl_FragColor*=2.2222;}",
i:"u16 u24 u13 u14 u21 u29".split(" "),Ja:["1.1111","gl_FragColor\\*=2.2222;","3.3333"]}},N=null,G=null,I={Ca:function(){return A},s:function(){if(!A){N=ha(L,2);G=ha(J,2);n="highp";for(var r in N)e(a,N[r],r);C.set("s0");a.enableVertexAttribArray(0);A=!0}},Cb:function(r){r.forEach(function(m){I.Bb(m)})},Bb:function(r){N[r.id]=r;e(a,r,r.id)},Zb:function(r,m,v){m||(m=r);N[m]=Object.create(G[r]);N[m].od=!0;G[r].Ja&&G[r].Ja.forEach(function(D,K){N[m].h=N[m].h.replace(new RegExp(D,"g"),v[K])});e(a,N[m],
m)},set:function(r){r=N[r];r.v&&(r.v=!1,e(a,r,r.id));l(r)},oa:function(r){return q(r,t(),"s40")},qb:function(r){return q(r,{h:"void main(){gl_FragColor=vec4(.5,.5,.5,.5);}",i:[],precision:"highp"},"s41")},Wc:function(r){return"undefined"===typeof N[r]?!1:N[r].da},J:function(){-1!==u&&(u=-1,d.ka.forEach(function(r){0!==r&&a.disableVertexAttribArray(r)}))},sb:function(){var r=0;d.ka.forEach(function(m,v){v=d.ja[v];a.vertexAttribPointer(m,v,a.FLOAT,!1,d.yb,r);r+=4*v})},ue:function(){a.enableVertexAttribArray(0)},
Ka:function(){I.La(a)},La:function(r){r.vertexAttribPointer(d.ka[0],2,r.FLOAT,!1,8,0)},Ze:function(r,m){a.uniform1i(d.u[r],m)},M:function(r,m){a.uniform1f(d.u[r],m)},Z:function(r,m,v){a.uniform2f(d.u[r],m,v)},$e:function(r,m){a.uniform2fv(d.u[r],m)},Wd:function(r,m){a.uniform3fv(d.u[r],m)},af:function(r,m,v,D){a.uniform3f(d.u[r],m,v,D)},bf:function(r,m,v,D,K){a.uniform4f(d.u[r],m,v,D,K)},rb:function(r,m){a.uniform4fv(d.u[r],m)},cf:function(r,m){a.uniformMatrix2fv(d.u[r],!1,m)},df:function(r,m){a.uniformMatrix3fv(d.u[r],
!1,m)},ef:function(r,m){a.uniformMatrix4fv(d.u[r],!1,m)},N:function(r,m){I.set(r);m.forEach(function(v){switch(v.type){case "4f":a.uniform4fv(d.u[v.name],v.value);break;case "3f":a.uniform3fv(d.u[v.name],v.value);break;case "2f":a.uniform2fv(d.u[v.name],v.value);break;case "1f":a.uniform1f(d.u[v.name],v.value);break;case "1i":a.uniform1i(d.u[v.name],v.value);break;case "mat2":a.uniformMatrix2fv(d.u[v.name],!1,v.value);break;case "mat3":a.uniformMatrix3fv(d.u[v.name],!1,v.value);break;case "mat4":a.uniformMatrix4fv(d.u[v.name],
!1,v.value)}})},Fe:function(){return"lowp"},m:function(){a.disableVertexAttribArray(0);I.J();for(var r in N){var m=N[r];m.da&&(m.da=!1,a.deleteProgram(m.Y));m.od&&delete N[r]}p.forEach(function(v){a.deleteShader(v)});p.splice(0);y=0;A=!1;d=null;u=-1}};return I}(),a=null,Ea=function(){function b(n){console.log("ERROR in ContextFF: ",n);return!1}function c(n){function k(){Da.m();M.reset();x.getExtension("WEBGL_lose_context").loseContext()}if(navigator.userAgent&&-1!==navigator.userAgent.indexOf("forceWebGL1"))return!1;
var z=document.createElement("canvas");z.setAttribute("width",5);z.setAttribute("height",5);var x=null;try{x=z.getContext("webgl2",n)}catch(f){return!1}if(!x)return!1;e(x);M.Mb(x);n=M.Wa(x);if(!n.R&&!n.S)return k(),!1;n=Da.Gb(x,n);k();return n?!0:!1}function e(n){n.clearColor(0,0,0,0);n.disable(n.DEPTH_TEST);n.disable(n.BLEND);n.disable(n.DITHER);n.disable(n.STENCIL_TEST);n.disable(n.CULL_FACE);n.GENERATE_MIPMAP_HINT&&n.hint(n.GENERATE_MIPMAP_HINT,n.FASTEST);n.disable(n.SAMPLE_ALPHA_TO_COVERAGE);
n.disable(n.SAMPLE_COVERAGE);n.depthFunc(n.LEQUAL);n.clearDepth(1)}var l=null,q=null,t=null,p=null,u=!0,d=null,y=null,A={B:function(){return l.width},H:function(){return l.height},xe:function(){return l},we:function(){return a},T:function(){return u},flush:function(){a.flush()},Zc:function(){d||(d=new Uint8Array(l.width*l.height*4));a.readPixels(0,0,l.width,l.height,a.RGBA,a.UNSIGNED_BYTE,d);return d},ze:function(){return l.toDataURL("image/jpeg")},Ae:function(){R.G();q||(q=document.createElement("canvas"),
t=q.getContext("2d"));q.width=l.width;q.height=l.height;for(var n=A.Zc(),k=t.createImageData(q.width,q.height),z=q.width,x=q.height,f=k.data,h=0;h<x;++h)for(var E=x-h-1,L=0;L<z;++L){var J=4*(h*z+L),N=4*(E*z+L);f[J]=n[N];f[J+1]=n[N+1];f[J+2]=n[N+2];f[J+3]=n[N+3]}t.putImageData(k,0,0);return q.toDataURL("image/png")},ye:function(n){!q&&n&&(q=document.createElement("canvas"),t=q.getContext("2d"));var k=n?q:document.createElement("canvas");k.width=l.width;k.height=l.height;(n?t:k.getContext("2d")).drawImage(l,
0,0);return k},s:function(n){n.Jb&&!n.Ib?l=document.getElementById(n.Jb):n.Ib&&(l=n.Ib);l||(l=document.createElement("canvas"));l.width=n&&void 0!==n.width?n.width:512;l.height=n&&void 0!==n.height?n.height:512;"undefined"===typeof n&&(n={});void 0===n.premultipliedAlpha&&(n.premultipliedAlpha=!1);void 0===n.hb&&(n.hb=!0);void 0===n.antialias&&(n.antialias=!1);if(a)u=a instanceof WebGL2RenderingContext;else{u=!0;var k={antialias:n.antialias,alpha:!0,preserveDrawingBuffer:!0,premultipliedAlpha:n.premultipliedAlpha,
stencil:!1,depth:n.hb};navigator&&navigator.userAgent&&-1!==navigator.userAgent.indexOf("noAntialiasing")&&(k.antialias=!1);var z=c(k);!z&&k.antialias&&(k.antialias=!1,z=c(k));z&&(a=l.getContext("webgl2",k));a?u=!0:((a=l.getContext("webgl",k))||(a=l.getContext("experimental-webgl",k)),u=!1)}if(!a)return b("WebGL1 and 2 are not enabled");(p=a.getExtension("WEBGL_lose_context"))&&n.Ad&&(y=n.Ad,l.addEventListener("webglcontextlost",y,!1));if(!M.s())return b("Not enough GL capabilities");e(a);C.s();U.s();
return Da.Gb(a,M.Yc())?!0:b("Cannot filter float textures")},m:function(){a&&(M.m(),Da.m());p&&y&&(l.removeEventListener("webglcontextlost",y,!1),p=y=null);a=d=t=q=l=null}};return A}(),za=function(){function b(){null===c&&("undefined"!==typeof C?c=C:"undefined"!==typeof JEShaders&&(c=JEShaders))}var c=null;b();return{Vd:function(e){c!==e&&(c&&c.J(),c=e)},Ca:function(){return c.Ca()},Ka:function(){return c.Ka()},La:function(e){return c.La(e)},sb:function(){return c.sb()},J:function(){return c.J()},
set:function(e){return c.set(e)},oa:function(e){b();return c.oa(e)},qb:function(e){b();return c.qb(e)},m:function(){return c.m()}}}(),V=function(){function b(g){a.bindTexture(a.TEXTURE_2D,g)}function c(g){m[0]=g;g=v[0];var H=g>>16&32768,F=g>>12&2047,S=g>>23&255;return 103>S?H:142<S?H|31744|((255==S?0:1)&&g&8388607):113>S?(F|=2048,H|(F>>114-S)+(F>>113-S&1)):H=(H|S-112<<10|F>>1)+(F&1)}function e(g){var H=new Uint16Array(g.length);g.forEach(function(F,S){H[S]=c(F)});return H}function l(){if(null!==D.eb)return D.eb;
var g=t(e([.5,.5,.5,.5]));return null===g?!0:D.eb=g}function q(){if(null!==D.fb)return D.fb;var g=t(new Uint8Array([127,127,127,127]));return null===g?!0:D.fb=g}function t(g){if(!za.Ca()||!f)return null;var H=null,F=Math.sqrt(g.length/4);try{var S=a.getError();if("FUCKING_BIG_ERROR"===S)return!1;H=K.instance({isFloat:!1,F:!0,array:g,width:F});S=a.getError();if(S!==a.NO_ERROR)return!1}catch(ia){return!1}R.G();a.viewport(0,0,F,F);a.clearColor(0,0,0,0);a.clear(a.COLOR_BUFFER_BIT);za.set("s0");H.Db(0);
U.l(!0,!0);g=4*F*F;S=new Uint8Array(g);a.readPixels(0,0,F,F,a.RGBA,a.UNSIGNED_BYTE,S);F=!0;for(var Z=0;Z<g;++Z)F=F&&3>Math.abs(S[Z]-127);H.remove();R.W();return F}var p=0,u=null,d=0,y=null,A=null,n=null,k=null,z=null,x=null,f=!1,h=[],E={isFloat:!1,isPot:!0,isLinear:!1,isMipmap:!1,isAnisotropicFiltering:!1,isMirrorX:!1,isMirrorY:!1,isSrgb:!1,isKeepArray:!1,isFlipY:null,width:0,height:0,url:null,array:null,data:null,D:null,Yb:null,nd:!1,F:!1,X:null,Ea:4,jb:0},L=!1,J=null,N=null,G=[[1,0,0,0],[0,1,0,
0],[0,0,1,0],[0,0,0,1]],I=!1,r=!1,m=new Float32Array(1),v=new Int32Array(m.buffer),D={eb:null,fb:null},K={s:function(){f||(z=[a.RGBA,null,a.RGBA,a.RGBA],x=[a.RGBA,null,a.RGBA,a.RGBA],u=[a.TEXTURE0,a.TEXTURE1,a.TEXTURE2,a.TEXTURE3,a.TEXTURE4,a.TEXTURE5,a.TEXTURE6,a.TEXTURE7],I="undefined"!==typeof JEContext,r="undefined"!==typeof M,I&&JEContext.Te()&&u.push(a.TEXTURE8,a.TEXTURE9),y=[-1,-1,-1,-1,-1,-1,-1,-1],k=[a.UNSIGNED_BYTE,a.FLOAT,a.FLOAT],f=!0)},gd:function(){if(!A){for(var g=new Float32Array(16384),
H=0;16384>H;++H)g[H]=2*Math.random()-1;A={random:K.instance({isFloat:!0,isPot:!0,array:g,width:64}),yc:K.instance({isFloat:!1,isPot:!0,width:1,array:new Uint8Array([0,0,0,0])})}}K.fe()},Le:function(){return A.yc},fe:function(){k[1]=M.Za(a)},Sd:function(){x=z=[a.RGBA,a.RGBA,a.RGBA,a.RGBA]},oc:function(g){C.set("s1");R.G();var H=g.B(),F=g.H();a.viewport(0,0,H,F);g.g(0);U.l(!1,!1)},Ve:function(g,H){K.oc(g);a.readPixels(0,0,g.B(),g.H(),a.RGBA,a.UNSIGNED_BYTE,H)},We:function(g,H){K.oc(g);return M.Ia(0,
0,g.B(),g.H(),H)},Tb:function(g,H,F,S,Z,ia,w){g.activeTexture(g.TEXTURE0);var da=g.createTexture();g.bindTexture(g.TEXTURE_2D,da);Z=Z instanceof Float32Array?Z:new Float32Array(Z);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_S,g.CLAMP_TO_EDGE);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_T,g.CLAMP_TO_EDGE);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MAG_FILTER,g.NEAREST);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MIN_FILTER,g.NEAREST);g.pixelStorei(g.UNPACK_FLIP_Y_WEBGL,ia);g.texImage2D(g.TEXTURE_2D,0,g.RGBA,
F,S,0,g.RGBA,g.FLOAT,Z);g.bindTexture(g.TEXTURE_2D,null);g.pixelStorei(g.UNPACK_FLIP_Y_WEBGL,!1);w&&(R.W(),C.oa(g));g.viewport(0,0,F,S);g.framebufferTexture2D(g.FRAMEBUFFER,g.COLOR_ATTACHMENT0,g.TEXTURE_2D,H,0);g.bindTexture(g.TEXTURE_2D,da);w?U.l(!0,!0):U.wa(g);g.deleteTexture(da);f&&(y[0]=-1,n=null,p=0)},Pa:function(g){g!==p&&(a.activeTexture(u[g]),p=g)},instance:function(g){function H(B){var O=a.getError();if("FUCKING_BIG_ERROR"===O)return!1;a.texImage2D(a.TEXTURE_2D,0,aa,Y,ba,B);O=a.getError();
O!==a.NO_ERROR&&Y!==a.RGBA&&(Y=a.RGBA,a.texImage2D(a.TEXTURE_2D,0,aa,Y,ba,B));return!0}function F(){if(!Ja){b(ea);ka&&a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,ka);w.isPot?(a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,w.isMirrorX?a.MIRRORED_REPEAT:a.REPEAT),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,w.isMirrorY?a.MIRRORED_REPEAT:a.REPEAT)):(a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE));w.isAnisotropicFiltering&&"undefined"!==
typeof JESETTINGS&&a.texParameterf(a.TEXTURE_2D,JEContext.Be().TEXTURE_MAX_ANISOTROPY_EXT,JESETTINGS.he);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,w.isLinear?a.LINEAR:a.NEAREST);w.isLinear?a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,w.isMipmap&&!qa?a.NEAREST_MIPMAP_LINEAR:a.LINEAR):a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,w.isMipmap&&!qa?a.NEAREST_MIPMAP_NEAREST:a.NEAREST);Y=z[w.Ea-1];aa=x[w.Ea-1];ba=k[Ga];if(M.T()){var B=M.$c();Y===a.RGBA&&ba===a.FLOAT?w.isMipmap||w.isLinear?
aa=Da.bd(a):M.Hb()?B&&(aa=B):aa=a.RGBA16F||a.RGBA:Y===a.RGB&&ba===a.FLOAT&&B&&(aa=B,Y=a.RGBA)}if(w.F&&!w.isFloat||w.isFloat&&w.isMipmap&&Da.td())aa=M.ad(),ba=M.Za(a);w.jb&&(Aa=w.jb);w.isSrgb&&4===w.Ea&&(Y=JEContext.Je());if(w.D)H(w.D);else if(w.url)H(pa);else if(la){B=la;try{"FUCKING_BIG_ERROR"!==a.getError()&&(a.texImage2D(a.TEXTURE_2D,0,aa,P,Q,0,Y,ba,B),a.getError()!==a.NO_ERROR&&(a.texImage2D(a.TEXTURE_2D,0,aa,P,Q,0,Y,ba,null),a.getError()!==a.NO_ERROR&&a.texImage2D(a.TEXTURE_2D,0,a.RGBA,P,Q,0,
a.RGBA,a.UNSIGNED_BYTE,null)))}catch(pb){a.texImage2D(a.TEXTURE_2D,0,aa,P,Q,0,Y,ba,null)}w.isKeepArray||(la=null)}else B=a.getError(),"FUCKING_BIG_ERROR"!==B&&(a.texImage2D(a.TEXTURE_2D,0,aa,P,Q,0,Y,ba,null),B=a.getError(),B!==a.NO_ERROR&&(Y=a.RGBA,w.F&&ba!==a.FLOAT&&(ba=a.FLOAT,a.texImage2D(a.TEXTURE_2D,0,aa,P,Q,0,Y,ba,null))));if(w.isMipmap)if(!qa&&X)X.Ya(),Ba=!0;else if(qa){B=Math.log2(Math.min(P,Q));ta=Array(1+B);ta[0]=ea;for(var O=1;O<=B;++O){var ca=Math.pow(2,O),T=P/ca;ca=Q/ca;var ra=a.createTexture();
b(ra);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.NEAREST);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.NEAREST);a.texImage2D(a.TEXTURE_2D,0,aa,T,ca,0,Y,ba,null);b(null);ta[O]=ra}Ba=!0}b(null);y[p]=-1;ka&&a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,!1);ua=!0;w.X&&X&&(w.X(X),w.X=null)}}function S(){for(var B=P*Q,O=2*B,ca=3*B,T=0;T<B;++T)ja[0][T]=va[T],ja[1][T]=va[T+B],ja[2][T]=va[T+O],ja[3][T]=va[T+ca]}function Z(){var B=P*Q*4;na=[new Uint8Array(B),new Uint8Array(B),new Uint8Array(B),new Uint8Array(B)];
ja=[new Float32Array(na[0].buffer),new Float32Array(na[1].buffer),new Float32Array(na[2].buffer),new Float32Array(na[3].buffer)];Ca=new Uint8Array(4*B);va=new Float32Array(Ca.buffer);wa=!0}function ia(){oa.Ra=new Uint8Array(P*Q*4);oa.Ub=new Float32Array(oa.buffer);oa.ib=!0}var w=Object.assign({},E,g),da=d++;null===w.isFlipY&&(w.isFlipY=w.url||w.array?!0:!1);w.data&&(w.array="string"===typeof w.data?ya(w.data):w.isFloat?new Float32Array(w.data):new Uint8Array(w.data),w.isFlipY=!1);var Ga=0,Ya=w.D?
!0:!1,xa=null,Ha=null,Ka=!1,Ia=null;w.F=w.F||w.isFloat;w.F&&(Ga=1);!w.nd&&w.isFloat&&r&&!M.Hb()&&(w.isFloat=!1);w.isFloat&&(Ga=2);w.isAnisotropicFiltering&&I&&!JEContext.Oe()&&(w.isAnisotropicFiltering=!1);var ea=w.Yb||a.createTexture(),pa=null,la=!1,P=0,Q=0,ua=!1,Ja=!1,wa=!1,ja=null,na=null,Ca=null,va=null,aa=null,Y=null,ba=null,ka=w.isFlipY,Za=(g=w.F&&w.isMipmap)&&Da.Ic(),qa=g&&Za?!0:!1,ta=null,Aa=-1,Ba=!1,oa={ib:!1,Ra:null,Ub:null};w.width&&(P=w.width,Q=w.height?w.height:P);var X={get:function(){return ea},
B:function(){return P},H:function(){return Q},Me:function(){return w.url},Pe:function(){return w.isFloat},Re:function(){return w.F},Se:function(){return w.isLinear},Ya:function(){a.generateMipmap(a.TEXTURE_2D)},Fc:function(B,O){qa?(B||(B=X.Xb()),K.Pa(O),b(ta[B]),y[O]=-1):X.g(O)},Xb:function(){-1===Aa&&(Aa=Math.log(P)/Math.log(2));return Aa},Xc:function(B){if(qa){B||(B=X.Xb());C.set("s11");K.Pa(0);for(var O=P,ca=Q,T=1;T<=B;++T)O/=2,ca/=2,C.Z("u7",.25/O,.25/ca),a.viewport(0,0,O,ca),b(ta[T-1]),a.framebufferTexture2D(R.ya(),
a.COLOR_ATTACHMENT0,a.TEXTURE_2D,ta[T],0),U.l(!1,1===T);y[0]=-1}else X.Ya()},g:function(B){if(!ua)return!1;K.Pa(B);if(y[B]===da)return!1;b(ea);y[B]=da;return!0},Db:function(B){a.activeTexture(u[B]);p=B;b(ea);y[B]=da},o:function(){n=X;a.framebufferTexture2D(R.ya(),a.COLOR_ATTACHMENT0,a.TEXTURE_2D,ea,0)},K:function(){n=X;a.viewport(0,0,P,Q);a.framebufferTexture2D(R.ya(),a.COLOR_ATTACHMENT0,a.TEXTURE_2D,ea,0)},xb:K.xb,resize:function(B,O){P=B;Q=O;F()},clone:function(B){B=K.instance({width:P,height:Q,
F:w.F,isFloat:w.isFloat,isLinear:w.isLinear,isMirrorY:w.isMirrorY,isFlipY:B?!ka:ka,isPot:w.isPot});za.set("s0");R.W();B.o();a.viewport(0,0,P,Q);X.g(0);U.l(!0,!0);return B},Yd:function(){a.viewport(0,0,P,Q)},remove:function(){a.deleteTexture(ea);Ja=!0;h.splice(h.indexOf(X),1);X=null},refresh:function(){X.Db(0);ka&&a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,!0);Ya?a.texImage2D(a.TEXTURE_2D,0,aa,Y,a.UNSIGNED_BYTE,w.D):a.texImage2D(a.TEXTURE_2D,0,aa,P,Q,0,Y,ba,la);ka&&a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,!1)},
nc:function(){wa||Z();a.readPixels(0,0,P,4*Q,a.RGBA,a.UNSIGNED_BYTE,Ca);S();return ja},Gd:function(){wa||Z();return M.Ia(0,0,P,4*Q,Ca).then(function(){S();return ja})},Id:function(){oa.ib||ia();a.readPixels(0,0,P,Q,a.RGBA,a.UNSIGNED_BYTE,oa.Ra);return oa.Ub},Hd:function(){oa.ib||ia();return M.Ia(0,0,P,Q,oa.Ra)},Kb:function(B){R.G();C.set("s12");X.g(0);if(B)a.viewport(0,0,P,Q),C.rb("u8",.25,.25,.25,.25),U.l(!1,!0);else for(B=0;4>B;++B)a.viewport(0,Q*B,P,Q),C.rb("u8",G[B]),U.l(!1,0===B)},hf:function(B){var O=
ba===k[0]&&!q();b(ea);ka&&a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,!0);O?(Ka||(xa=document.createElement("canvas"),xa.width=P,xa.height=Q,Ha=xa.getContext("2d"),Ia=Ha.createImageData(P,Q),Ka=!0),Ia.data.set(B),Ha.putImageData(Ia,0,0),a.texImage2D(a.TEXTURE_2D,0,aa,Y,ba,xa)):a.texImage2D(a.TEXTURE_2D,0,aa,P,Q,0,Y,ba,B);y[p]=da;ka&&a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,!1)},jf:function(B,O){b(ea);O&&a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,!0);a.texImage2D(a.TEXTURE_2D,0,aa,Y,ba,B);y[p]=da;O&&a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,
!1)},Ye:function(B,O){var ca=P*Q,T=4*ca;B=w.F?B?"RGBE":"JSON":"RGBA";O&&(B=O);O=M.T()&&!1;var ra=null;switch(B){case "RGBE":ra="s42";break;case "JSON":ra=O?"s0":"s12";break;case "RGBA":case "RGBAARRAY":ra="s6"}wa||("RGBA"===B||"RGBE"===B||"RGBAARRAY"===B?(na=new Uint8Array(T),wa=!0):"JSON"!==B||O||Z());R.G();C.set(ra);X.g(0);T=null;if("RGBA"===B||"RGBE"===B||"RGBAARRAY"===B){a.viewport(0,0,P,Q);U.l(!0,!0);a.readPixels(0,0,P,Q,a.RGBA,a.UNSIGNED_BYTE,na);if("RGBAARRAY"===B)return{data:na};L||(J=document.createElement("canvas"),
N=J.getContext("2d"),L=!0);J.width=P;J.height=Q;ca=N.createImageData(P,Q);ca.data.set(na);N.putImageData(ca,0,0);T=J.toDataURL("image/png")}else if("JSON"===B)if(O)T=new Float32Array(ca),a.viewport(0,0,P,Q),U.l(!0,!0),a.readPixels(0,0,P,Q,a.RGBA,a.FLOAT,T);else{for(T=0;4>T;++T)a.viewport(0,Q*T,P,Q),C.rb("u8",G[T]),U.l(!T,!T);X.nc();T=Array(ca);for(O=0;O<ca;++O)T[4*O]=ja[0][O],T[4*O+1]=ja[1][O],T[4*O+2]=ja[2][O],T[4*O+3]=ja[3][O]}return{format:B,data:T,width:P,height:Q,isMirrorY:w.isMirrorY,isFlipY:"RGBA"===
B?w.isFlipY:!w.isFlipY}}};w.isMipmap&&!qa&&ua&&!Ba&&(X.Ya(),Ba=!0);if(w.url)b(ea),a.texImage2D(a.TEXTURE_2D,0,a.RGBA,1,1,0,a.RGBA,a.UNSIGNED_BYTE,null),pa=new Image,pa.qe="Anonymous",pa.crossOrigin="Anonymous",pa.src=w.url,pa.onload=function(){P=pa.width;Q=pa.height;F()};else if(w.D){var La=function(){P=void 0!==w.D.videoWidth?w.D.videoWidth:w.D.width;Q=void 0!==w.D.videoHeight?w.D.videoHeight:w.D.height;P?F():setTimeout(La,1)};La()}else w.array?(w.F&&!w.isFloat?w.array instanceof Uint16Array?(la=
w.array,F()):l()?(la=e(w.array),F()):(F(),K.Tb(a,ea,X.B(),X.H(),w.array,ka,!0)):(la=w.isFloat?w.array instanceof Float32Array?w.array:new Float32Array(w.array):w.array instanceof Uint8Array?w.array:new Uint8Array(w.array),F()),w.isKeepArray||(la&&la!==w.array&&(la=null),delete w.array)):w.Yb?ua=!0:F();X.Ie=X.B;w.X&&ua&&(w.X(X),w.X=null);h.push(X);return X},G:function(g){g!==p&&(a.activeTexture(u[g]),p=g);y[g]=-1;b(null)},ke:function(g){A.random.g(g)},xb:function(){n=null;a.framebufferTexture2D(R.ya(),
a.COLOR_ATTACHMENT0,a.TEXTURE_2D,null,0)},reset:function(){0!==p&&a.activeTexture(u[0]);for(var g=0;g<u.length;++g)y[g]=-1;p=-1},Xe:function(){p=-1},de:function(){for(var g=0;g<u.length;++g)K.G(g)},Vb:function(){A&&(A.random.remove(),A.yc.remove())},gf:function(g,H){if("RGBA"===g.format||"RGBE"===g.format){var F=new Image;F.src=g.data;F.onload=function(){K.instance({isMirrorY:g.isMirrorY,isFlipY:g.isFlipY,isFloat:!1,D:F,X:function(S){if("RGBA"===g.format)H(S);else{var Z=g.width,ia=g.height,w=K.instance({isMirrorY:g.isMirrorY,
isFloat:!0,width:Z,height:ia,isFlipY:g.isFlipY});R.W();a.viewport(0,0,Z,ia);C.set("s43");w.o();S.g(0);U.l(!0,!0);K.G(0);H(w);a.flush();setTimeout(S.remove,50)}}})}}else"JSON"===g.format?H(K.instance({isFloat:!0,isFlipY:g.isFlipY,width:g.width,height:g.height,array:new Float32Array(g.data)})):H(!1)},Lc:e,m:function(){n&&(R.W(),K.xb(),R.G());K.de();h.slice(0).forEach(function(g){g.remove()});h.splice(0);f=!1;d=0;"undefined"!==typeof Da&&Da.m();A=null}};return K}(),Fa={instance:function(b){var c=[V.instance(b),
V.instance(b)],e=[c[1],c[0]],l=e,q={Pd:function(t){l[1].o();l[0].g(t);q.vc()},Qd:function(t){l[1].K();l[0].g(t);q.vc()},vc:function(){l=l===c?e:c},refresh:function(){l[0].refresh();l[1].refresh()},g:function(t){l[0].g(t)},je:function(t){l[1].g(t)},Ee:function(){return l[0]},Ge:function(){return l[1]},remove:function(){l[0].remove();l[1].remove();l=null}};return q}},U=function(){function b(d){var y={P:null,C:null};y.P=d.createBuffer();d.bindBuffer(d.ARRAY_BUFFER,y.P);d.bufferData(d.ARRAY_BUFFER,new Float32Array([-1,
-1,3,-1,-1,3]),d.STATIC_DRAW);y.C=d.createBuffer();d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,y.C);d.bufferData(d.ELEMENT_ARRAY_BUFFER,new Uint16Array([0,1,2]),d.STATIC_DRAW);return y}var c=null,e=0,l=!1,q=[],t=-2,p=-2,u={reset:function(){p=t=-2},s:function(){l||(c=b(a),u.Qa(),l=!0)},instance:function(d){var y=e++,A=d.C?d.C.length:0,n="undefined"===typeof d.mode?a.STATIC_DRAW:d.mode,k=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,k);a.bufferData(a.ARRAY_BUFFER,d.P instanceof Float32Array?d.P:new Float32Array(d.P),
n);t=y;var z=null,x=null,f=null;if(d.C){z=a.createBuffer();a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,z);var h=null;65536>d.C.length?(h=Uint16Array,x=a.UNSIGNED_SHORT,f=2):(h=Uint32Array,x=a.UNSIGNED_INT,f=4);h=d.C instanceof h?d.C:new h(d.C);a.bufferData(a.ELEMENT_ARRAY_BUFFER,h,n);p=y}var E={Gc:function(L){t!==y&&(a.bindBuffer(a.ARRAY_BUFFER,k),t=y);L&&za.sb()},Dc:function(){p!==y&&(a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,z),p=y)},bind:function(L){E.Gc(L);E.Dc()},se:function(){a.drawElements(a.TRIANGLES,A,
x,0)},te:function(L,J){a.drawElements(a.TRIANGLES,L,x,J*f)},remove:function(){a.deleteBuffer(k);d.C&&a.deleteBuffer(z);E=null}};q.push(E);return E},Qa:function(){-1!==t&&(a.bindBuffer(a.ARRAY_BUFFER,c.P),t=-1);-1!==p&&(a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,c.C),p=-1)},l:function(d,y){d&&U.Qa();y&&za.Ka();a.drawElements(a.TRIANGLES,3,a.UNSIGNED_SHORT,0)},wa:function(d){d=d||a;var y=b(d);d.bindBuffer(d.ARRAY_BUFFER,y.P);d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,y.C);za.La(d);d.clear(d.COLOR_BUFFER_BIT);d.drawElements(d.TRIANGLES,
3,d.UNSIGNED_SHORT,0);d.flush();d.bindBuffer(d.ARRAY_BUFFER,null);d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,null);d.deleteBuffer(y.P);d.deleteBuffer(y.C);u.reset();l&&(u.Qa(),za.Ka())},Vb:function(){var d=a,y=c;d.deleteBuffer(y.P);d.deleteBuffer(y.C)},m:function(){u.Vb();q.forEach(function(d){d.remove()});a.bindBuffer(a.ARRAY_BUFFER,null);a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,null);u.reset();l=!1;q.splice(0);e=0}};return u}(),R=function(){var b=null,c=null,e=null,l=!1,q=[],t={A:-2,Sb:1},p={Ca:function(){return l},
s:function(){if(!l){b=a.createFramebuffer();var u=M.T();c=u&&a.DRAW_FRAMEBUFFER?a.DRAW_FRAMEBUFFER:a.FRAMEBUFFER;e=u&&a.READ_FRAMEBUFFER?a.READ_FRAMEBUFFER:a.FRAMEBUFFER;l=!0}},Ce:function(){return c},cd:function(){return e},ya:function(){return a.FRAMEBUFFER},He:function(){return t},ve:function(){return b},instance:function(u){void 0===u.bc&&(u.bc=!1);var d=u.ga?u.ga:null,y=u.width,A=void 0!==u.height?u.height:u.width,n=b,k=null,z=!1,x=!1,f=0;d&&(y=y?y:d.B(),A=A?A:d.H());var h={uc:function(){z||
(n=a.createFramebuffer(),z=!0,f=t.Sb++)},Bc:function(){h.uc();h.o();k=a.createRenderbuffer();a.bindRenderbuffer(a.RENDERBUFFER,k);a.renderbufferStorage(a.RENDERBUFFER,a.DEPTH_COMPONENT16,y,A);a.framebufferRenderbuffer(c,a.DEPTH_ATTACHMENT,a.RENDERBUFFER,k);a.clearDepth(1)},bind:function(E,L){f!==t.A&&(a.bindFramebuffer(c,n),t.A=f);d&&d.o();L&&a.viewport(0,0,y,A);E&&a.clear(a.COLOR_BUFFER_BIT|a.DEPTH_BUFFER_BIT)},ie:function(){f!==t.A&&(a.bindFramebuffer(c,n),t.A=f)},clear:function(){a.clear(a.COLOR_BUFFER_BIT|
a.DEPTH_BUFFER_BIT)},oe:function(){a.clear(a.COLOR_BUFFER_BIT)},pe:function(){a.clear(a.DEPTH_BUFFER_BIT)},Yd:function(){a.viewport(0,0,y,A)},o:function(){f!==t.A&&(a.bindFramebuffer(c,n),t.A=f)},rtt:function(E){d=E;t.A!==f&&(a.bindFramebuffer(a.FRAMEBUFFER,n),t.A=f);E.o()},G:function(){a.bindFramebuffer(c,null);t.A=-1},resize:function(E,L){y=E;A=L;k&&(a.bindRenderbuffer(a.RENDERBUFFER,k),a.renderbufferStorage(a.RENDERBUFFER,a.DEPTH_COMPONENT16,y,A))},remove:function(){n===b||x||(a.bindFramebuffer(c,
n),a.framebufferTexture2D(c,a.COLOR_ATTACHMENT0,a.TEXTURE_2D,null,0),k&&a.framebufferRenderbuffer(c,a.DEPTH_ATTACHMENT,a.RENDERBUFFER,null),a.bindFramebuffer(c,null),a.deleteFramebuffer(n),k&&a.deleteRenderbuffer(k));x=!0}};u.bc&&h.Bc();q.push(h);return h},G:function(){a.bindFramebuffer(c,null);t.A=-1},ee:function(){a.bindFramebuffer(c,null);a.clear(a.COLOR_BUFFER_BIT|a.DEPTH_BUFFER_BIT);a.viewport(0,0,M.B(),M.H());t.A=-1},reset:function(){t.A=-2},W:function(){0!==t.A&&(a.bindFramebuffer(c,b),t.A=
0)},clear:function(){a.viewport(0,0,M.B(),M.H());a.clear(a.COLOR_BUFFER_BIT)},m:function(){p.G();q.forEach(function(u){u.remove()});a.deleteFramebuffer(b);p.reset();l=!1;q.splice(0);t.A=-2;t.Sb=1}};return p}(),M=function(){function b(){l="undefined"===typeof Ea?JEContext:Ea;q=!0}function c(f,h){for(var E=0;E<f.length;++E){var L=h.getExtension(f[E]);if(L)return L}return null}function e(){null!==k.Oa&&(clearInterval(k.Oa),k.Oa=null);k.ma=!1}var l=null,q=!1,t={cc:!1,tb:null,ub:null,fc:!1,rd:!1,vb:null,
hc:!1,wb:null,dc:!1,Sa:null,kd:!1,Ta:null,ld:!1},p=null,u={R:!0,S:!0,Xa:!0,mc:!1},d=null,y=!0,A=null,n=null,k={ma:!1,ba:null,za:null,bb:-1,ca:null,Oa:null},z="undefined"===typeof window?{}:window,x={s:function(){if(q)return!0;x.reset();q||b();var f=a;if(!p.cc){p.tb=x.Pb(f);z.GL_EXT_FLOAT=p.tb;p.fc=p.tb?!0:!1;if(p.fc||x.T())p.ub=x.Qb(f),p.rd=p.ub?!0:!1,z.GL_EXT_FLOATLINEAR=p.ub;p.cc=!0}if(!p.dc){p.vb=x.va(f);p.vb&&(p.hc=!0,z.GL_EXT_HALFFLOAT=p.vb);if(p.hc||x.T())p.wb=x.Rb(f),z.GL_EXT_HALFFLOATLINEAR=
p.wb;p.Ne=p.wb?!0:!1;p.dc=!0}p.Sa=x.Nb(f);p.kd=p.Sa?!0:!1;z.GL_EXT_COLORBUFFERFLOAT=p.Sa;p.Ta=x.Ob(f);p.ld=p.Ta?!0:!1;z.GL_EXT_COLORBUFFERHALFFLOAT=p.Ta;R.s();V.s();if(!x.Rc())return!1;U.s();V.gd();return!0},reset:function(){p=Object.assign({},t);d=Object.assign({},u)},B:function(){q||b();return l.B()},H:function(){q||b();return l.H()},T:function(){q||b();return l.T()},Mb:function(f){x.Nb(f);x.Ob(f);x.Pb(f);x.Qb(f);x.va(f);x.Rb(f)},Nb:c.bind(null,["EXT_color_buffer_float","WEBGL_color_buffer_float",
"OES_color_buffer_float"]),Ob:c.bind(null,["EXT_color_buffer_half_float","WEBGL_color_buffer_half_float","OES_color_buffer_half_float"]),Pb:c.bind(null,["OES_texture_float","MOZ_OES_texture_float","WEBKIT_OES_texture_float"]),Qb:c.bind(null,["OES_texture_float_linear","MOZ_OES_texture_float_linear","WEBKIT_OES_texture_float_linear"]),va:c.bind(null,["OES_texture_half_float","MOZ_OES_texture_half_float","WEBKIT_OES_texture_half_float"]),Rb:c.bind(null,["OES_texture_half_float_linear","MOZ_OES_texture_half_float_linear",
"WEBKIT_OES_texture_half_float_linear"]),Za:function(f){var h=x.va(f);return h&&h.HALF_FLOAT_OES?h.HALF_FLOAT_OES:f.HALF_FLOAT||f.FLOAT},$c:function(){return n||a.RGBA32F||a.RGBA},ad:function(){return A||a.RGBA16F||a.RGBA},Yc:function(){return d},Hb:function(){return d.R},me:function(){return d.S},le:function(){return d.Xa},Jc:function(){return d.mc&&y},xc:function(f){y=f;!f&&k.ma&&(a.deleteSync(k.za),a.bindBuffer(k.ca,null),k.ma=!1)},Ma:function(f,h,E){function L(){f.bindTexture(f.TEXTURE_2D,null);
f.bindFramebuffer(J,null);f.deleteTexture(I);f.deleteFramebuffer(G)}var J=f.FRAMEBUFFER,N=f.NEAREST,G=f.createFramebuffer();f.bindFramebuffer(J,G);var I=f.createTexture();f.activeTexture(f.TEXTURE0);f.bindTexture(f.TEXTURE_2D,I);f.pixelStorei(f.UNPACK_FLIP_Y_WEBGL,!1);f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_S,f.CLAMP_TO_EDGE);f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_T,f.CLAMP_TO_EDGE);f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MAG_FILTER,N);f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,N);
f.texImage2D(f.TEXTURE_2D,0,h,3,3,0,f.RGBA,E,null);f.framebufferTexture2D(f.FRAMEBUFFER,f.COLOR_ATTACHMENT0,f.TEXTURE_2D,I,0);if(f.checkFramebufferStatus(f.READ_FRAMEBUFFER||f.FRAMEBUFFER)!==f.FRAMEBUFFER_COMPLETE)return L(),!1;za.qb(f);f.clearColor(0,0,0,0);f.viewport(0,0,3,3);f.disable(f.DEPTH_TEST);f.clear(f.COLOR_BUFFER_BIT);U.wa(f);f.bindFramebuffer(J,null);za.oa(f);f.activeTexture(f.TEXTURE0);f.bindTexture(f.TEXTURE_2D,I);U.wa(f);h=new Uint8Array(36);f.readPixels(0,0,3,3,f.RGBA,f.UNSIGNED_BYTE,
h);L();for(E=0;36>E;++E)if(3!==E%4&&3<Math.abs(h[E]-127))return!1;return!0},Wa:function(f){var h={R:!1,S:!1};f.disable(f.BLEND);f.clearColor(0,0,0,0);f.clear(f.COLOR_BUFFER_BIT);f.RGBA32F&&x.Ma(f,f.RGBA32F,f.FLOAT)&&(h.R=!0,n=f.RGBA32F);!h.R&&x.Ma(f,f.RGBA,f.FLOAT)&&(h.R=!0,n=f.RGBA);var E=x.Za(f);A=null;f.RGBA16F&&x.Ma(f,f.RGBA16F,E)&&(h.S=!0,A=f.RGBA16F);!h.S&&x.Ma(f,f.RGBA,E)&&(h.S=!0,A=f.RGBA);return h},Sc:function(){var f=R.instance({width:2});f.uc();var h=V.instance({width:2,isFloat:!0,Ea:3});
f.o();h.o();a.flush();a.checkFramebufferStatus(R.cd())!==a.FRAMEBUFFER_COMPLETE?(V.Sd(),d.Xa=!1):d.Xa=!0;f.remove();h.remove()},Tc:function(){var f=!1;x.T()&&(f="PIXEL_PACK_BUFFER STREAM_READ SYNC_GPU_COMMANDS_COMPLETE WAIT_FAILED fenceSync deleteSync createBuffer".split(" ").every(function(h){return"undefined"!==typeof a[h]}));d.mc=f},Rc:function(){var f=x.Wa(a);Object.assign(d,f);if(!d.R&&!d.S)return!1;x.Sc();x.Tc();return!0},Ia:function(f,h,E,L,J){if(!x.Jc())return a.readPixels(f,h,E,L,a.RGBA,
a.UNSIGNED_BYTE,J),Promise.resolve(J);null===k.ba&&(k.ca=a.PIXEL_PACK_BUFFER,k.ba=a.createBuffer(),k.bb=-1);a.bindBuffer(k.ca,k.ba);J.byteLength!==k.bb&&(a.bufferData(k.ca,J.byteLength,a.STREAM_READ),k.bb=J.byteLength);a.readPixels(f,h,E,L,a.RGBA,a.UNSIGNED_BYTE,0);k.za=a.fenceSync(a.SYNC_GPU_COMMANDS_COMPLETE,0);a.flush();return new Promise(function(N,G){function I(){if(!k.ma)return e(),G(),!1;switch(a.clientWaitSync(k.za,0,0)){case a.TIMEOUT_EXPIRED:return!1;case a.WAIT_FAILED:return e(),G(),!1;
default:return e(),a.deleteSync(k.za),a.getBufferSubData(k.ca,0,J),a.bindBuffer(k.ca,null),N(J),!0}}e();k.ma=!0;I()||(k.Oa=setInterval(I,0))})},m:function(){V.m();za.m();R.m();U.m();null!==k.ba&&(a.deleteBuffer(k.ba),k.ba=null);q=!1}};return x}(),Da=function(){function b(G,I,r,m){h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MIN_FILTER,m?h.NEAREST_MIPMAP_NEAREST:h.LINEAR);var v=null;if(null!==r)try{v=h.getError();if("FUCKING_BIG_ERROR"===v)return!1;h.texImage2D(h.TEXTURE_2D,0,G,4,4,0,h.RGBA,I,r);v=h.getError();
if(v!==h.NO_ERROR)return!1}catch(D){return!1}m&&h.generateMipmap(h.TEXTURE_2D);h.clear(h.COLOR_BUFFER_BIT);U.wa(h);v=h.getError();if("FUCKING_BIG_ERROR"===v)return!1;h.readPixels(0,0,2,2,h.RGBA,h.UNSIGNED_BYTE,A);v=h.getError();v===h.INVALID_OPERATION&&"undefined"!==typeof h.PIXEL_PACK_BUFFER&&(h.bindBuffer(h.PIXEL_PACK_BUFFER,null),h.readPixels(0,0,2,2,h.RGBA,h.UNSIGNED_BYTE,A),v=h.getError());if(v!==h.NO_ERROR)return!1;r=!0;for(m=0;16>m;++m)r=r&&4>Math.abs(A[m]-127);r&&(d.lc=I,d.ac=G);return r}
function c(G,I){return E.R&&b(G,h.FLOAT,new Float32Array(n),I)?(u=p.Ab,!0):!1}function e(G,I,r){if(!E.S)return!1;var m=V.Lc(n),v=M.va(h);if(v&&v.HALF_FLOAT_OES&&b(G,v.HALF_FLOAT_OES,m,I)||h.HALF_FLOAT&&b(G,h.HALF_FLOAT,m,I))return u=p.ha,!0;m=new Float32Array(n);if(b(G,h.FLOAT,m,I))return u=p.ha,!0;h.bindTexture(h.TEXTURE_2D,r);h.texImage2D(h.TEXTURE_2D,0,h.RGBA,2,2,0,h.RGBA,h.UNSIGNED_BYTE,null);h.bindFramebuffer(d.ua,N);V.Tb(h,r,2,2,m,!1,!1);h.bindFramebuffer(d.ua,null);h.bindTexture(h.TEXTURE_2D,
r);return b(G,null,null,I)?(u=p.ha,!0):!1}function l(G,I,r){y=!0;if(e(G,!0,r)||c(I,!0))return!0;y=!1;return e(G,!1,r)||c(I,!1)?!0:!1}function q(G){if(u===p.J){h=G||a;u=p.RGBA8;y=!0;M.Mb(h);E||(E=M.Wa(h));R.reset();N=h.createFramebuffer();d.ua=h.DRAW_FRAMEBUFFER||h.FRAMEBUFFER;h.bindFramebuffer(d.ua,null);h.clearColor(0,0,0,0);h.viewport(0,0,2,2);C.J();L=C.oa(h);G=h.createTexture();h.activeTexture(h.TEXTURE0);h.bindTexture(h.TEXTURE_2D,G);h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_S,h.REPEAT);h.texParameteri(h.TEXTURE_2D,
h.TEXTURE_WRAP_T,h.REPEAT);h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MAG_FILTER,h.NEAREST);J=G;var I=G=h.RGBA,r=h.RGBA16F,m=h.RGBA32F;m&&(G=m);r&&(I=r);if((r||m)&&l(I,G,J))return t(),!0;G=I=h.RGBA;if(l(I,G,J))return t(),!0;u=p.RGBA8;t();return!1}}function t(){h.deleteProgram(L.Y);h.deleteTexture(J);J=L=null}for(var p={J:-1,Ab:3,ha:2,RGBA8:0},u=p.J,d={lc:null,ac:null,ua:null},y=!0,A=new Uint8Array(16),n=Array(64),k=0;4>k;++k)for(var z=0;4>z;++z){var x=0===(z+k)%2?1:0,f=4*k+z;n[4*f]=x;n[4*f+1]=x;n[4*f+
2]=x;n[4*f+3]=x}var h=null,E=null,L=null,J=null,N=null;return{Ic:function(G){q(G);return y},Gb:function(G,I){u===p.J&&(typeof("undefined"!==I)&&(E=I),q(G));return u!==p.RGBA8},Qe:function(G){q(G);return u===p.Ab},td:function(G){q(G);return u===p.ha},De:function(G){q(G);return d.lc},bd:function(G){q(G);return d.ac},m:function(){h=null;y=!0;u=p.J;E=null}}}(),Ma={instance:function(b){var c=V.instance(b.alpha),e=V.instance(b.beta);return{Uc:function(){c.g(1);e.g(2)}}}},Pa={instance:function(b){var c=
null,e=!1,l=!1,q=null,t=!1,p=!1,u=null,d="undefined"===typeof b.preprocessing?!1:b.preprocessing,y="undefined"===typeof b.preprocessingSize?b.size:b.preprocessingSize;b.mask&&(e=!0,W&&void 0!==W.Cc&&(b.mask=W.Cc+b.mask),c=V.instance({isFloat:!1,url:b.mask}));var A=!1;b.customInputShader&&(A="s44",C.Bb({name:"_",id:A,h:b.customInputShader,ff:["uSource"],precision:"lowp"}),C.N(A,[{type:"1i",name:"_",value:0}]));switch(d){case "sobel":u="s31";t=!0;break;case "meanNormalization":u="s32";t=!0;break;case "grayScale":u=
"s28";t=!1;break;case "grayScaleTilt":u="s29";p=!0;t=!1;break;case "rgbGrayTilt":u="s30";p=!0;t=!1;break;case "copy":u=A?A:"s0";break;case "inputLightRegulation":u=A?A:"s28";q=Na.instance({$b:y,kc:b.size,ic:b.nBlurPass,Aa:!1});l=!0;break;case "inputMix0":u="none";q=Oa.instance({$:y,zc:b.varianceMin,Eb:b.blurKernelSizePx,Aa:!1});l=!0;break;case "direct":case "none":u="abort";break;default:u="s3"}p&&C.N(u,[{name:"u26",type:"1f",value:b.tilt}]);e&&(u+="Mask");var n=V.instance({isFloat:!1,isPot:!1,width:b.size}),
k={B:function(){return y},$a:function(){return k.B()},ed:function(){return l?q.ab():n},I:function(z){R.W();"abort"!==u&&("none"!==u&&(C.set(u),t&&C.M("u27",1/b.size),n.K(),e&&c.g(1),U.l(!1,!1),n.g(0),z=n),l&&q.process(z))},m:function(){n.remove();e&&c.remove()}};return k}},Va={instance:function(b){function c(g){q.forEach(function(H,F){t[F][0]=g[0][H];t[F][1]=g[1][H];t[F][2]=g[2][H];t[F][3]=g[3][H]});return t}"undefined"===typeof b.normalize&&(b.normalize=!1);var e={input:null,ta:null,gb:null,L:null,
Fa:null,nb:null,ob:null},l=null,q=[],t=[],p=!1,u=null,d=!0,y=-1,A=b.isReorganize?b.isReorganize:!1,n=b.kernelsCount?!0:!1,k=b.dynPelu?Ma.instance(b.dynPelu):!1,z=k?!0:!1,x={isEnabled:!1};b.pd?(b.sparsity="undefined"!==typeof b.sparsity?b.sparsity:b.Ha.$a(),d=!1):"full"===b.connectivityUp&&(b.sparsity=b.Ha.$a());var f={elu:"s15",elu01:"s16",relu:"s14",arctan:"s18",sigmoid:"s13",copy:"s0",softplus:"s19",dynPelu:"s17"}[b.activation],h=b.sparsity*b.sparsity,E=!1,L=b.size,J="";if(b.maxPooling){switch(b.maxPooling.size){case 2:J=
"s33";break;case 4:J="s34"}E=!0;L/=b.maxPooling.size;e.nb=V.instance({isFloat:!0,isPot:!1,width:L})}var N=void 0!==b.yd&&b.yd?!0:!1,G=null,I=null,r=null;if(N){G="s45"+b.index.toString();C.Zb("s45",G,[((b.normalization.n-1)/2).toFixed(1)]);C.N(G,[{type:"1i",name:"u1",value:0},{type:"2f",name:"u7",value:[1/b.size,1/b.size]},{type:"1f",name:"u6",value:b.normalization.alpha},{type:"1f",name:"u9",value:b.normalization.beta},{type:"1f",name:"u30",value:b.normalization.k}]);var m={isFloat:!0,isPot:!0,width:b.size};
I=V.instance(m);r=V.instance(m)}var v=-1,D=null;d&&(e.L=V.instance({isFloat:!0,isPot:!1,width:b.size}));e.ta=V.instance(b.bias);var K={B:function(){return b.size},$a:function(){return L},Wb:function(){return b.classesCount},Ec:function(g){l.g(g)},Cd:function(){b.remap&&b.remap.isEnabled&&(x={isEnabled:!0,wd:V.instance({isFloat:!1,isFlipY:!1,array:new Uint8Array(b.remap.maskTexture.data),width:b.remap.maskTexture.width,isPot:!1}),Da:b.remap.layers.map(function(g){return b.parent.dd(g)}),depth:b.remap.depth})},
Td:function(){switch(b.connectivityUp){case "direct":D=Qa.instance(b.connectivity);break;case "square":D=Ra.instance(b.connectivity);break;case "squareFast":D=Sa.instance(b.connectivity,b.activation);break;case "full":D=Ta.instance(b.connectivity);break;case "conv":y=b.kernelsCount,D=Ua.instance(b.connectivity),A&&(e.Fa=V.instance({width:L,isFloat:!0,isFlipY:!1,isPot:!1}))}if(D.fa){var g=b.size*b.sparsity;v=Math.log(g/b.size)/Math.log(2);e.input=V.instance({isMipmap:!0,isFloat:!0,isPot:!0,width:g,
jb:v});e.gb=V.instance({isFloat:!0,isPot:!0,width:b.size})}},I:function(g,H){l=g;D.fa?(e.input.K(),n&&e.ta.g(2),D.I(x),e.input.g(0),e.input.Xc(v),e.gb.K(),n?C.set("s0"):(C.set("s27"),C.M("u25",h),e.ta.g(1)),e.input.Fc(v,0),U.l(!1,!1),C.set(f),N?I.o():e.L.o(),e.gb.g(0),z&&k.Uc(),U.l(!1,!1)):(e.L.K(),e.ta.g(1),D.I());N&&(C.set(G),r.o(),I.g(0),U.l(!1,!1),C.set("s46"),C.M("u6",1),e.L.o(),r.g(1),U.l(!1,!1));if(d)return E?(e.nb.K(),e.L.g(0),C.set(J),C.Z("u7",1/b.size,1/b.size),U.l(!1,!1),H=e.nb):H=e.L,
H.g(0),A&&(e.Fa.o(),C.set("s21"),C.Z("u12",y,L/y),U.l(!1,!1),H=e.Fa,e.Fa.g(0)),H;var F=e.L;b.normalize&&(C.set("gpuRawAvg"===p?"s8":"s7"),C.M("u4",1/b.size),e.ob.K(),e.L.g(0),U.l(!1,!1),F=e.ob);g=null;switch(p){case "cpuRGBA2Float":F.Kb(!1);H?g=K.Ed(F).then(u):(F=K.Fd(F),u(F));break;case "cpuMeanFloat":F.Kb(!0);H?g=F.Hd().then(u):(F=F.Id(),u(F));break;case "gpuRawAvg":case "gpuRaw":F.g(0);case "none":null!==u&&u(F)}H&&null===g&&(g=Promise.resolve());return g},Mc:function(g){g&&(p=g.pb||"none",u=g.mb||
null);e.L=V.instance({isFloat:!0,isPot:!0,isMipmap:!1,width:b.size});g="undefined"!==typeof b.classesCount&&b.classesCount?b.classesCount:b.size*b.size;for(var H=0,F=0,S=0;H<g;++H)q.push(F+(b.size-1-S)*b.size),t.push([-1,-1,-1,-1]),++F,F===b.size&&(F=0,++S);b.normalize&&(e.ob=V.instance({isFloat:!0,isPot:!0,width:b.size}))},Ed:function(g){return g.Gd().then(c)},Fd:function(g){g=g.nc();c(g);return t},m:function(){for(var g in e){var H=e[g];H&&H.remove()}D&&(D.m(),D=null)}};b.Ha&&K.Td(b.Ha);return K}};
function Wa(b){var c=null,e=null,l=0;this.s=function(q){this.Rd(q.Da);e.Mc({pb:q.pb,mb:q.mb})};this.dd=function(q){return c[q]};this.Rd=function(q){var t=null;l=q.length;c=q.map(function(p,u){p=Object.assign({},p,{index:u,parent:this,Ha:t,pd:u===l-1});return t=u=0===u?Pa.instance(p):Va.instance(p)});e=c[l-1];c.forEach(function(p,u){0!==u&&p.Cd()})};this.I=function(q){var t=q;c.forEach(function(p){t=p.I(t,!1)});return t};this.ab=function(){return e.ed()};this.Wb=function(){return e.Wb()};this.m=function(){c&&
(c.forEach(function(q){q.m()}),e=c=null,l=0)};"undefined"!==typeof b&&this.s(b)}
var Qa={instance:function(b){var c=V.instance(b.weights);return{fa:!0,xa:function(){return 1},m:function(){c.remove()},fd:function(){return c},I:function(){C.set("s26");c.g(1);U.l(!1,!1)}}}},Ta={instance:function(b){var c=b.fromLayerSize,e=V.instance(b.weights);return{fa:!0,xa:function(){return c},m:function(){e.remove()},I:function(l){if(l.isEnabled){C.set("s24");l.wd.g(3);var q,t=Math.min(l.Da.length,l.depth);for(q=0;q<t;++q)l.Da[q].Ec(4+q)}else C.set("s23");C.M("u16",b.toLayerSize);e.g(1);U.l(!1,
!1)}}}},Ra={instance:function(b){for(var c=b.fromLayerSize,e=b.toLayerSize,l=b.toSparsity,q=l*e,t=q/c,p=c/e,u=0,d=0,y=0,A=Array(l*e*l*e*4),n=Array(l*e*l*e*4),k=Array(c*c),z=0;z<k.length;++z)k[z]=0;z=Math.floor(l/2);for(var x=.5/e,f=.5/c,h=.5/q,E=0;E<e;++E)for(var L=Math.round(E*p),J=0;J<e;++J){var N=Math.round(J*p),G=E/e,I=J/e;G+=x;I+=x;for(var r=0;r<l;++r){var m=L+r-z;0>m&&(m+=c);m>=c&&(m-=c);for(var v=0;v<l;++v){var D=u/q,K=d/q,g=N+v-z;0>g&&(g+=c);g>=c&&(g-=c);var H=m/c,F=g/c;K=1-K-1/q;H+=f;F+=
f;D+=h;K+=h;var S=E*l+r,Z=J*l+v;Z=e*l-Z-1;S=Z*e*l+S;A[4*S]=D;A[4*S+1]=K;A[4*S+2]=H;A[4*S+3]=F;F=k[g*c+m]++;S=F%t;H=m*t+S;g=g*t+(F-S)/t;g=c*t-1-g;g=g*c*t+H;n[4*g]=D;n[4*g+1]=K;n[4*g+2]=G;n[4*g+3]=I;++u>=q&&(u=0,++d);++y}}}k=null;var ia=V.instance(b.weights);delete b.weights.data;var w=V.instance({width:q,isFloat:!0,array:new Float32Array(n),isPot:!0});n=null;var da=V.instance({width:q,isFloat:!0,array:new Float32Array(A),isPot:!0});A=null;return{fa:!0,xa:function(){return t},m:function(){w.remove();
da.remove();ia.remove()},I:function(){C.set("s22");ia.g(1);da.g(2);U.l(!1,!1)}}}},Ua={instance:function(b){var c=b.kernelsCount,e=b.toSparsity,l=e*b.toLayerSize/b.fromLayerSize,q=V.instance(b.weights);return{fa:!0,xa:function(){return l},Ke:function(){return e},fd:function(){return q},m:function(){q.remove()},I:function(){C.set("s25");C.M("u22",c);C.M("u23",e);C.M("u16",b.toLayerSize);C.M("u24",b.fromLayerSize);q.g(1);U.l(!1,!1)}}}},Sa={instance:function(b,c){var e=b.fromLayerSize,l=b.toLayerSize,
q=b.toSparsity,t=b.stride?b.stride:1,p=q*l/e,u=l<e,d=e/l,y=V.instance(b.weights),A="s47"+[e.toString(),l.toString(),q.toString(),t.toString(),c].join("_");C.Wc(A)||(b=ma(c),l=[{type:"1f",name:"u16",value:l},{type:"1f",name:"u29",value:t}],u&&l.push({type:"1f",name:"u24",value:e}),e=[(u?p:q).toFixed(1),b],u&&e.push(d.toFixed(1)),C.Zb(u?"s39":"s38",A,e),C.N(A,l.concat([{type:"1i",name:"u14",value:0},{type:"1i",name:"u21",value:1},{type:"1i",name:"u13",value:3}])));return{fa:!1,xa:function(){return p},
m:function(){y.remove()},I:function(){C.set(A);y.g(3);U.l(!1,!1)}}}},Na={instance:function(b){var c=b.ic?b.ic:3,e=b.$b?b.$b:64,l=b.kc?b.kc:64,q=b.Aa?!0:!1;b={isFloat:!1,width:e,isPot:!1,isFlipY:!1};var t=V.instance(b),p=V.instance(b),u=V.instance(b),d=V.instance(b),y=V.instance({isFloat:!0,width:l,isPot:!1,isFlipY:!1}),A=1/e;return{process:function(n){C.set("s35");d.o();U.l(q,!1);C.set("s36");for(var k=0;k<c;++k)t.o(),C.Z("u7",A,0),U.l(q,!1),u.o(),d.g(0),U.l(q,!1),p.o(),t.g(0),C.Z("u7",0,A),U.l(q,
!1),d.o(),u.g(0),U.l(q,!1),k!==c-1&&p.g(0);C.set("s37");y.o();n.g(0);p.g(1);d.g(2);U.l(q,!1);y.g(0)},ab:function(){return y}}}},Oa={instance:function(b){function c(d){return V.instance({isFloat:d,width:e.$,isPot:!1,isFlipY:!1})}var e=Object.assign({zc:.1,Eb:9,$:128,Aa:!1},b),l=c(!1),q=[c(!1),c(!1),c(!1)],t=[c(!1),c(!1),c(!1)],p=c(!0),u=[l,t[0],t[1]];b={u1:0};C.Cb([{id:"s49",name:"_",h:"uniform sampler2D u1;varying vec2 vv0;const vec3 f=vec3(.2126,.7152,.0722),g=vec3(1.,1.,1.);void main(){vec3 b=texture2D(u1,vv0).rgb;float a=dot(b,f);gl_FragColor=vec4(a,a,a,a);}",
j:b,i:["u1"],precision:"lowp"},{id:"s50",name:"_",h:"uniform sampler2D u1;\n        const float HALFKERNELSIZE = "+Math.round((e.Eb-1)/2).toFixed(2)+";\n        const float DXY = "+(1/e.$).toFixed(6)+"HALFKERNELSIZE",j:b,i:["u1","u31"],precision:"lowp"},{id:"s51",name:"_",h:"uniform sampler2D u32, u33, u34, u35;\n        const float VARIANCEMIN = "+e.zc.toFixed(4)+"u32",j:{u32:0,u33:1,u34:2,u35:3},i:["u32","u33","u34","u35"],precision:"highp"}]);return{process:function(){C.set("s49");l.K();U.l(e.Aa,
!1);C.set("s50");for(var d=0;3>d;++d)C.Z("u31",1,0),q[d].o(),u[d].g(0),U.l(!1,!1),C.Z("u31",0,1),t[d].o(),q[d].g(0),U.l(!1,!1);C.set("s51");p.o();l.g(0);t[0].g(1);t[1].g(2);t[2].g(3);U.l(!1,!1);p.g(0)},ab:function(){return p}}}};function Xa(b,c){b[c]=!0;b.setAttribute(c,"true")}function $a(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream}
function ab(){var b=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);return b&&b.length&&2<b.length?[parseInt(b[1],10),parseInt(b[2],10),parseInt(b[3]||0,10)]:[0,0,0]}function bb(){var b=navigator.userAgent.toLowerCase();return-1!==b.indexOf("safari")&&-1===b.indexOf("chrome")?!0:!1}function cb(){return navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?!0:!1}
function db(b){if(!b)return b;var c=null;if(b.video){var e=function(l){return l&&"object"===typeof l?Object.assign({},l):l};c={};"undefined"!==typeof b.video.width&&(c.width=e(b.video.width));"undefined"!==typeof b.video.height&&(c.height=e(b.video.height));"undefined"!==typeof b.video.facingMode&&(c.facingMode=e(b.video.facingMode))}c={audio:b.audio,video:c};"undefined"!==typeof b.deviceId&&(c.deviceId=b.deviceId);return c}
function eb(b){var c=b.video.width;b.video.width=b.video.height;b.video.height=c;return b}
function fb(b){function c(k){return[480,576,640,648,720,768,800,960,1080,1152,1280,1366,1920].sort(function(z,x){return Math.abs(z-k)-Math.abs(x-k)})}function e(k){var z=db(b);k=k(z);q.push(k);l(k)}function l(k){if(k.video&&k.video.facingMode&&k.video.facingMode.exact){var z=k.video.facingMode.exact;k=db(k);delete k.video.facingMode.exact;k.video.facingMode.ideal=z;q.push(k)}}var q=[];if(!b||!b.video)return q;l(b);if(b.video.width&&b.video.height){if(b.video.width.ideal&&b.video.height.ideal){var t=
c(b.video.width.ideal).slice(0,3),p=c(b.video.height.ideal).slice(0,3),u={},d=0;for(u.V=void 0;d<t.length;u={V:u.V},++d){u.V=t[d];var y={},A=0;for(y.U=void 0;A<p.length;y={U:y.U},++A)if(y.U=p[A],u.V!==b.video.width.ideal||y.U!==b.video.height.ideal){var n=Math.max(u.V,y.U)/Math.min(u.V,y.U);n<4/3-.1||n>16/9+.1||e(function(k,z){return function(x){x.video.width.ideal=k.V;x.video.height.ideal=z.U;return x}}(u,y))}}}e(function(k){return eb(k)})}b.video.width&&b.video.height&&(b.video.width.ideal&&b.video.height.ideal&&
e(function(k){delete k.video.width.ideal;delete k.video.height.ideal;return k}),e(function(k){delete k.video.width;delete k.video.height;return k}));b.video.facingMode&&(e(function(k){delete k.video.facingMode;return k}),b.video.width&&b.video.height&&e(function(k){eb(k);delete k.video.facingMode;return k}));q.push({audio:b.audio,video:!0});return q}
function gb(b){try{var c=window.matchMedia("(orientation: portrait)").matches?!0:!1}catch(l){c=window.innerHeight>window.innerWidth}if(c&&b&&b.video){c=b.video.width;var e=b.video.height;c&&e&&c.ideal&&e.ideal&&c.ideal>e.ideal&&(b.video.height=c,b.video.width=e)}}
function hb(b){b.volume=0;Xa(b,"muted");if(bb()){if(1===b.volume){var c=function(){b.volume=0;window.removeEventListener("mousemove",c,!1);window.removeEventListener("touchstart",c,!1)};window.addEventListener("mousemove",c,!1);window.addEventListener("touchstart",c,!1)}setTimeout(function(){b.volume=0;Xa(b,"muted")},5)}}
function ib(b,c,e){return new Promise(function(l,q){if(b.srcObject&&b.srcObject.getVideoTracks){var t=b.srcObject.getVideoTracks();1!==t.length?q("INVALID_TRACKNUMBER"):(t=t[0],c?jb(b,l,q,e):(t.stop(),l()))}else q("BAD_IMPLEMENTATION")})}
function kb(b,c,e,l){function q(p){t||(t=!0,e(p))}var t=!1;navigator.mediaDevices.getUserMedia(l).then(function(p){function u(){setTimeout(function(){if(b.currentTime){var d=b.videoWidth,y=b.videoHeight;if(0===d||0===y)q("VIDEO_NULLSIZE");else{d&&(b.style.width=d.toString()+"px");y&&(b.style.height=y.toString()+"px");d={Kc:null,Zd:null,xd:null};try{var A=p.getVideoTracks()[0];A&&(d.xd=A,d.Kc=A.getCapabilities(),d.Zd=A.getSettings())}catch(n){}bb()||$a()?b.parentNode&&null!==b.parentNode?(t||c(b,p,
d),setTimeout(function(){b.play()},100)):(document.body.appendChild(b),hb(b),t||c(b,p,d),setTimeout(function(){b.style.transform="scale(0.0001,0.0001)";b.style.position="fixed";b.style.bottom="0px";b.style.right="0px";hb(b);setTimeout(function(){b.play()},100)},80)):t||c(b,p,d)}}else q("VIDEO_NOTSTARTED")},700)}"undefined"!==typeof b.srcObject?b.srcObject=p:(b.src=window.URL.createObjectURL(p),b.videoStream=p);hb(b);b.addEventListener("loadeddata",function(){var d=b.play();hb(b);"undefined"===typeof d?
u():d.then(function(){u()}).catch(function(){q("VIDEO_PLAYPROMISEREJECTED")})},!1)}).catch(function(p){q(p)})}
function jb(b,c,e,l){if(b)if(cb()){if(l&&l.video){if($a()){var q=ab();0!==q[0]&&(12>q[0]||12===q[0]&&2>q[1])&&gb(l)}l.video.width&&l.video.width.ideal&&(b.style.width=l.video.width.ideal+"px");l.video.height&&l.video.height.ideal&&(b.style.height=l.video.height.ideal+"px")}Xa(b,"autoplay");Xa(b,"playsinline");l&&l.audio?b.volume=0:Xa(b,"muted");kb(b,c,function(){function t(u){if(0===u.length)e("INVALID_FALLBACKCONSTRAINTS");else{var d=u.shift();kb(b,c,function(){t(u)},d)}}var p=fb(l);t(p)},l)}else e&&
e("MEDIASTREAMAPI_NOTFOUND");else e&&e("VIDEO_NOTPROVIDED")}
var lb=function(){function b(){e(A+d.lb)}function c(){z.ra=0===d.ia?window.requestAnimationFrame(e):window.requestAnimationFrame(l)}function e(f){k.na&&null!==y&&(f-=A,f=Math.min(Math.max(f,d.Lb[0]),d.Lb[1]),A+=f,y(A),q())}function l(f){k.na&&(z.timeout=window.setTimeout(e.bind(null,f),d.ia))}function q(){z.ra&&(window.cancelAnimationFrame(z.ra),z.ra=null);z.timeout&&(window.clearTimeout(z.timeout),z.timeout=null)}function t(f){f?(k.Ba=!0,n.postMessage("STOP"),M.xc(!0),c()):(k.Ba=!1,M.xc(!1),n.postMessage("START"))}
function p(){window.addEventListener("blur",function(){t(!1)});window.addEventListener("focus",function(){t(!0)})}var u={ec:!0,Lb:[1,200],lb:50,ia:0},d=null,y=null,A=0,n=null,k={da:!1,Ba:!0,sd:!1,qd:!1,na:!1},z={ra:null,timeout:null},x={s:function(f){d=Object.assign(u,f);Object.assign(k,{Ba:!0,da:!0,na:!1});if(d.ec){f=!1;try{if("undefined"===typeof SharedWorker){var h=URL.createObjectURL(new Blob(["let handler = null;\n      self.addEventListener('message', function(e){\n        switch (e.data) {\n          case 'START':\n            if (handler === null){\n              handler = setInterval(function(){\n                self.postMessage('tick');\n              }, "+
d.lb.toString()+");\n            }\n            break;\n          case 'STOP':\n            if (handler !== null){\n              clearInterval(handler);\n              handler = null;\n            }\n            break;\n        };\n      }, false);"],{type:"text/javascript"})),E=new Worker(h);E.addEventListener("message",b);n=E;k.sd=!0}else{var L=URL.createObjectURL(new Blob(["let handler = null;\n      onconnect = function(e) {\n        const port = e.ports[0];\n        port.addEventListener('message', function(e) {\n          \n          switch (e.data) {\n            case 'START':\n              if (handler === null){\n                handler = setInterval(function(){\n                  port.postMessage('tick');\n                }, "+
d.lb.toString()+");\n              }\n              break;\n            case 'STOP':\n              if (handler !== null){\n                clearInterval(handler);\n                handler = null;\n              }\n              break;\n          };\n          \n        });\n        \n        port.start();\n      } // end onconnect()"],{type:"text/javascript"})),J=new SharedWorker(L);J.port.start();J.port.addEventListener("message",b);n=J.port;k.qd=!0}f=!0}catch(N){}f&&p()}},update:function(f){Object.assign(d,
f)},Jd:function(f){k.da||x.s({});q();k.na=!0;y=f;k.Ba&&c()},stop:function(){y=null;k.na=!1;q()}};return x}(),mb=function(){var b={jc:4,Ga:[1.5,1.5,2],O:[.1,.1,.1],pc:1,$:-1,cb:-1,ae:2,Bd:1,qc:!0,Vc:.8},c=null,e=[],l=0,q=[.5,.5,1];return{s:function(t){c=Object.assign({},b,t);e.splice(0);t=c.Ga[0]*c.O[0];var p=c.Ga[1]*c.O[1],u=1/(1+c.Ga[2]*c.O[2]),d=c.pc*Math.min(c.$,c.cb),y=d/c.$;d/=c.cb;var A=.5*c.Vc;A*=A;for(var n=0;n<c.jc;++n){var k=Math.pow(u,n),z=y*k,x=d*k;k=z*t;var f=x*p,h=z/2;x/=2;for(var E=
1+(1-h-h)/k,L=1+(1-x-x)/f,J=0;J<L;++J)for(var N=x+J*f,G=N-.5,I=0;I<E;++I){var r=h+I*k,m=r-.5;m*m+G*G>A||e.push([r,N,z*c.Bd])}}c.qc&&e.sort(function(v,D){var K=v[0]-.5;v=v[1]-.5;var g=D[0]-.5;D=D[1]-.5;return K*K+v*v-(g*g+D*D)})},get:function(){var t=e.length;if(0===t)return q;l>=t&&(l=0);var p=e[Math.floor(l)];l=(l+1/c.ae)%t;return p}}}(),W={neuralNetworkPath:"NNC.json",ia:10,jd:64,width:400,height:400,Md:[1,1,2],Ld:2,Nd:.7,O:[.2,.2,.3],ce:55,Kd:[.1,
1.1],Ac:1,$d:.9,Dd:100,ea:[.2,.8],tc:.1,Od:.55,Qc:1,ge:20,Oc:!0};
function nb(b){function c(){++N;1===N&&(ob.ready=!0,b.Hc(!1,{video:x.element,GL:a,videoTexture:x.ga.get(),videoTextureCut:z.la.get()}),E!==h.pause&&(lb.stop(),E=h.play,e(0)),N=0)}function e(){E!==h.pause&&(W.Oc?q().then(function(){l();p()}):(l(),q().then(p)))}function l(){R.reset();R.W();var v=x.element.currentTime-r;0>v&&(r=x.element.currentTime);1E3*v<W.ge||(x.ga.refresh(),r+=v,C.set("s53"),x.Na.K(),x.ga.g(0),U.l(!1,!0));for(v=0;v<W.Ac;++v)C.set("s54"),z.la.K(),x.Na.g(0),z.pa.g(1),U.l(!1,!1),z.la.g(0),
n.I(z.la)}function q(){var v=Date.now();if(v-A<W.Dd)return Promise.resolve();A=v;C.set("s1");R.G();a.viewport(0,0,1,1);z.kb.g(0);U.l(!1,!1);return M.Ia(0,0,1,1,f).then(t)}function t(){var v=W.ea[0]+I*(W.ea[1]-W.ea[0]),D=Math.abs(f[1]/255*2-1),K=128<f[0],g=K&&D<v+W.tc;v=K&&D<v-W.tc;E===h.play&&v?(b.Fb(!0),E=h.Va):E!==h.Va||g||(b.Fb(!1),E=h.play)}function p(){J===L.visible&&(R.ee(),C.set("s52"),x.Na.g(1),z.pa.g(0),U.l(!1,!1));a.flush();lb.Jd(e)}function u(){z.pa.Qd(1);C.set("s55");C.Wd("u36",mb.get());
U.l(!1,!1);C.set("s56");z.kb.Pd(1);z.pa.g(0);U.l(!1,!1)}var d=Math.round(W.width),y=Math.round(W.height),A=Date.now(),n=null;mb.s({Ga:W.Md,jc:W.Ld,$:d,cb:y,pc:W.Nd,O:W.O,qc:!0});var k=[1,d/y],z={la:null,pa:null,kb:null,re:null},x={element:null,ga:null,Na:null,Ua:null},f=new Uint8Array([0,0,0,0]),h={zd:-1,vd:0,play:1,Va:2,pause:3},E=h.vd,L={hidden:0,visible:1},J=b.md?L.visible:L.hidden,N=0,G="undefined"!==typeof b.zb?b.zb:"../../",I=(("undefined"!==typeof b.sc?b.sc:W.Od)-W.ea[0])/(W.ea[1]-W.ea[0]),
r=0,m={Ud:function(v){I=v},be:function(v){J=v?L.visible:L.hidden},wc:function(v,D){if(v&&E===h.pause||!v&&E!==h.pause)return Promise.resolve();D=D?ib(x.element,!v,x.Ua):Promise.resolve();v?(E=h.pause,lb.stop()):(E=h.Va,lb.stop(),E=h.play,e(0));return D},Pc:function(){n&&(n.m(),n=null);Ea.m();E=h.zd},s:function(){x.Ua={video:{facingMode:{ideal:"user"},width:{min:480,max:1280,ideal:800},height:{min:480,max:1280,ideal:600}},audio:!1};jb(cb()?document.createElement("video"):!1,function(v){m.start(v)},
function(){errorCallback("NO_WEBCAM")},x.Ua)},start:function(v){x.element=v;m.hd();m.Nc();m.Xd();fa(G+W.neuralNetworkPath,m.ud.bind(null,c))},hd:function(){C.Cb([{id:"s53",name:"_",qa:"attribute vec2 a0;uniform vec2 u37,u38;varying vec2 vv0;void main(){gl_Position=vec4(a0,0.,1.),vv0=u38+u37*a0;}",sa:["a0"],ja:[2],h:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",i:["u1","u37","u38"],precision:"lowp"},{id:"s54",name:"_",h:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",
qa:"attribute vec2 a0;uniform sampler2D u39;uniform vec2 u40;const vec2 f=vec2(.25,.5),g=vec2(.75,.5),e=vec2(.5,.5);varying vec2 vv0;void main(){vec4 a=texture2D(u39,f);vec2 d=a.gb,b=a.a*u40;vec4 c=texture2D(u39,g);float l=c.a,i=c.y;vec2 j=vec2(1./cos(i),1.);b*=j;vec2 k=a0*.5+e;vv0=d+(k-e)*b,gl_Position=vec4(a0,0.,1.);}",sa:["a0"],ja:[2],i:["u1","u39","u40"],precision:"lowp"},{id:"s55",name:"_",qa:"attribute vec2 a0;void main(){gl_Position=vec4(a0,0.,1.);}",h:"uniform sampler2D u41,u39;uniform vec3 u36,u42;uniform vec2 u43;uniform float u44,u45;const vec4 e=vec4(.25,.25,.25,.25);const float f=1e-3;void main(){vec4 b=texture2D(u39,vec2(.25,.5));float a=floor(b.r+f),c=0.;vec4 d=texture2D(u41,vec2(.125,.625)),g=texture2D(u41,vec2(.375,.625));bool h=dot(d-g,e)>u45;h?a=2.:a>u44?a=0.:a>1.9&&(b.a>u43.y||b.a<u43.x)?a=0.:a>1.9?a+=1.:0.;if(a<.9)b.gba=u36,a=1.;else{float i=dot(e,texture2D(u41,vec2(.375,.875))),j=dot(e,texture2D(u41,vec2(.625,.875))),k=dot(e,texture2D(u41,vec2(.875,.875))),l=dot(e,texture2D(u41,vec2(.125,.875)));c=clamp(l,-1.+f,1.-f);float m=step(1.5,a);a*=m;float n=b.a;b.gba+=vec3(i,j,k)*u42*n;}b.r=a+c*.5+.5,gl_FragColor=b;}",
i:"u41 u39 u36 u43 u44 u45 u42".split(" ")},{id:"s56",name:"_",h:"uniform sampler2D u39,u46;uniform float u47;varying vec2 vv0;const vec2 e=vec2(.5,.5);void main(){vec4 a=texture2D(u39,e),b=texture2D(u46,e);float c=step(2.,a.r),d=fract(a.r);vec4 f=vec4(c,d,0.,1.);gl_FragColor=mix(f,b,u47);}",i:["u39","u46","u47"]},{id:"s52",name:"_",h:"uniform sampler2D u39,u48;uniform vec2 u40;varying vec2 vv0;const vec2 j=vec2(1.,1.);const vec3 k=vec3(0.,.7,1.);void main(){vec4 f=texture2D(u39,vec2(.5,.5));vec3 l=texture2D(u48,vv0).rgb;vec2 g=f.gb;float m=f.a;vec2 a=m*u40,c=g+a,d=g;d-=a/2.,c-=a/2.;vec2 n=.5*(d+c),h=step(d,vv0)*step(vv0,c);float o=h.x*h.y;vec2 b=2.*abs(n-vv0)/a;b=pow(b,3.*j);float i=max(b.x,b.y);i*=o,gl_FragColor=vec4(mix(l,k,i),1.);}",
i:["u39","u48","u40"]}]);C.N("s54",[{type:"1i",name:"u1",value:0},{type:"1i",name:"u39",value:1},{type:"2f",name:"u40",value:k}]);C.N("s56",[{type:"1i",name:"u39",value:0},{type:"1i",name:"u46",value:1},{type:"1f",name:"u47",value:W.$d}]);C.N("s52",[{type:"1i",name:"u39",value:0},{type:"1i",name:"u48",value:1},{type:"2f",name:"u40",value:k}]);C.N("s55",[{type:"1i",name:"u41",value:0},{type:"1i",name:"u39",value:1},{type:"2f",name:"u43",value:W.Kd},{type:"1f",name:"u44",value:W.ce},{type:"1f",name:"u45",
value:W.Qc},{type:"3f",name:"u42",value:[W.O[0]*k[0],W.O[1]*k[1],W.O[2]]}])},Nc:function(){x.ga=V.instance({D:x.element,isPot:!1,isFloat:!1,isFlipY:!0});x.Na=V.instance({isPot:!1,Ue:!0,isFloat:!1,width:d,height:y});z.la=V.instance({isPot:!0,isFloat:!1,width:W.jd});var v={width:1,height:1,isFloat:!0,isPot:!1,array:new Float32Array([0,.5,.5,0])};z.pa=Fa.instance(v);v={width:1,height:1,isFloat:!0,isPot:!1,array:new Float32Array([0,.5,0,1])};z.kb=Fa.instance(v)},Xd:function(){var v=[.5,.5],D=x.element.videoHeight/
x.element.videoWidth,K=Ea.H()/Ea.B();D>K?1>=D?v[0]*=D:v[1]/=D:(v[0]*=D,D=1/K,v[0]*=D,v[1]*=D);v[1]*=K;C.N("s53",[{type:"1i",name:"u1",value:0},{type:"2f",name:"u37",value:v},{type:"2f",name:"u38",value:[.5,.5]}])},ud:function(v,D){D="object"===typeof D?D:JSON.parse(D);n=new Wa({Da:D.layers,pb:"gpuRawAvg",mb:u});v&&v()}};return m}
var ob={ready:!1,set_sensibility:function(b){ob.ready&&ob.aa.Ud(b)},toggle_pause:function(b,c){return ob.ready?ob.aa.wc(b,c):Promise.reject()},destroy:function(){return new Promise(function(b,c){ob.aa.wc(!0,!0).catch(function(){c()}).finally(function(){ob.aa.Pc();b()})})},toggle_display:function(b){ob.ready&&ob.aa.be(b)},init:function(b){function c(e){b.callbackReady&&b.callbackReady(e?e:"UNKNOW_ERROR")}ob.aa=nb({md:"undefined"===typeof b.isDisplayVideo?!0:b.isDisplayVideo,Hc:function(e,l){b.callbackReady&&
b.callbackReady(e,l)},Fb:b.callbackTrack,sc:b.sensibility,zb:b.NNCPath});lb.s({ec:!1,ia:W.ia});if(!Ea.s({Jb:b.canvasId,width:W.width,height:W.height,debug:!1,hb:!1,premultipliedAlpha:!0}))return c&&c("COMPAT_FAIL"),!1;C.s();ob.aa.s();return!0}};window.GLANCETRACKERAPI=ob;
;return GLANCETRACKERAPI||window.GLANCETRACKERAPI;})();